Usando la configuraci├│n de inicio de CRMF360.Api\Properties\launchSettings.json...
Compilando...
warn: Microsoft.EntityFrameworkCore.Model.Validation[10622]
      Entity 'Project' has a global query filter defined and is the required end of a relationship with the entity 'BoardColumn'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
warn: Microsoft.EntityFrameworkCore.Model.Validation[10622]
      Entity 'Project' has a global query filter defined and is the required end of a relationship with the entity 'ProjectMember'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
warn: Microsoft.EntityFrameworkCore.Model.Validation[10622]
      Entity 'Project' has a global query filter defined and is the required end of a relationship with the entity 'Task'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT EXISTS (
          SELECT 1
          FROM "Roles" AS r)
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (4ms) [Parameters=[@__adminEmail_0='?'], CommandType='Text', CommandTimeout='30']
      SELECT EXISTS (
          SELECT 1
          FROM "Users" AS u
          WHERE u."Email" = @__adminEmail_0)
info: CRMF360.Infrastructure.Jobs.OverdueNotificationJob[0]
      OverdueNotificationJob started.
info: Microsoft.Hosting.Lifetime[14]
      Now listening on: http://localhost:5005
info: Microsoft.Hosting.Lifetime[0]
      Application started. Press Ctrl+C to shut down.
info: Microsoft.Hosting.Lifetime[0]
      Hosting environment: Development
info: Microsoft.Hosting.Lifetime[0]
      Content root path: C:\Users\Nahue\Desktop\Code\Crm-F360\back\CRMF360.Api
warn: Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware[3]
      Failed to determine the https port for redirect.
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (30ms) [Parameters=[@__convIds_0='?' (DbType = Object)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name", t."Id", t."ConversationId", t."JoinedAt", t."LastReadAt", t."UserId", t."Id0", t."Active", t."CreatedAt", t."Email", t."FullName", t."LastLoginAt", t."PasswordHash", t."Phone"
      FROM "ChatConversations" AS c
      LEFT JOIN (
          SELECT c0."Id", c0."ConversationId", c0."JoinedAt", c0."LastReadAt", c0."UserId", u."Id" AS "Id0", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
          FROM "ChatParticipants" AS c0
          INNER JOIN "Users" AS u ON c0."UserId" = u."Id"
      ) AS t ON c."Id" = t."ConversationId"
      WHERE c."Id" = ANY (@__convIds_0)
      ORDER BY c."LastMessageAt" DESC, c."Id", t."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (30ms) [Parameters=[@__convIds_0='?' (DbType = Object)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name", t."Id", t."ConversationId", t."JoinedAt", t."LastReadAt", t."UserId", t."Id0", t."Active", t."CreatedAt", t."Email", t."FullName", t."LastLoginAt", t."PasswordHash", t."Phone"
      FROM "ChatConversations" AS c
      LEFT JOIN (
          SELECT c0."Id", c0."ConversationId", c0."JoinedAt", c0."LastReadAt", c0."UserId", u."Id" AS "Id0", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
          FROM "ChatParticipants" AS c0
          INNER JOIN "Users" AS u ON c0."UserId" = u."Id"
      ) AS t ON c."Id" = t."ConversationId"
      WHERE c."Id" = ANY (@__convIds_0)
      ORDER BY c."LastMessageAt" DESC, c."Id", t."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (30ms) [Parameters=[@__convIds_0='?' (DbType = Object)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name", t."Id", t."ConversationId", t."JoinedAt", t."LastReadAt", t."UserId", t."Id0", t."Active", t."CreatedAt", t."Email", t."FullName", t."LastLoginAt", t."PasswordHash", t."Phone"
      FROM "ChatConversations" AS c
      LEFT JOIN (
          SELECT c0."Id", c0."ConversationId", c0."JoinedAt", c0."LastReadAt", c0."UserId", u."Id" AS "Id0", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
          FROM "ChatParticipants" AS c0
          INNER JOIN "Users" AS u ON c0."UserId" = u."Id"
      ) AS t ON c."Id" = t."ConversationId"
      WHERE c."Id" = ANY (@__convIds_0)
      ORDER BY c."LastMessageAt" DESC, c."Id", t."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (31ms) [Parameters=[@__convIds_0='?' (DbType = Object)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name", t."Id", t."ConversationId", t."JoinedAt", t."LastReadAt", t."UserId", t."Id0", t."Active", t."CreatedAt", t."Email", t."FullName", t."LastLoginAt", t."PasswordHash", t."Phone"
      FROM "ChatConversations" AS c
      LEFT JOIN (
          SELECT c0."Id", c0."ConversationId", c0."JoinedAt", c0."LastReadAt", c0."UserId", u."Id" AS "Id0", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
          FROM "ChatParticipants" AS c0
          INNER JOIN "Users" AS u ON c0."UserId" = u."Id"
      ) AS t ON c."Id" = t."ConversationId"
      WHERE c."Id" = ANY (@__convIds_0)
      ORDER BY c."LastMessageAt" DESC, c."Id", t."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "ChatMessages" AS c
      INNER JOIN "Users" AS u ON c."SenderId" = u."Id"
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0
      ORDER BY c."SentAt" DESC
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "ChatMessages" AS c
      INNER JOIN "Users" AS u ON c."SenderId" = u."Id"
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0
      ORDER BY c."SentAt" DESC
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "ChatMessages" AS c
      INNER JOIN "Users" AS u ON c."SenderId" = u."Id"
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0
      ORDER BY c."SentAt" DESC
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "ChatMessages" AS c
      INNER JOIN "Users" AS u ON c."SenderId" = u."Id"
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0
      ORDER BY c."SentAt" DESC
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32), @__participant_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0 AND c."SentAt" > @__participant_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32), @__participant_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0 AND c."SentAt" > @__participant_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32), @__participant_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0 AND c."SentAt" > @__participant_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32), @__participant_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0 AND c."SentAt" > @__participant_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__convIds_0='?' (DbType = Object)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name", t."Id", t."ConversationId", t."JoinedAt", t."LastReadAt", t."UserId", t."Id0", t."Active", t."CreatedAt", t."Email", t."FullName", t."LastLoginAt", t."PasswordHash", t."Phone"
      FROM "ChatConversations" AS c
      LEFT JOIN (
          SELECT c0."Id", c0."ConversationId", c0."JoinedAt", c0."LastReadAt", c0."UserId", u."Id" AS "Id0", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
          FROM "ChatParticipants" AS c0
          INNER JOIN "Users" AS u ON c0."UserId" = u."Id"
      ) AS t ON c."Id" = t."ConversationId"
      WHERE c."Id" = ANY (@__convIds_0)
      ORDER BY c."LastMessageAt" DESC, c."Id", t."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__convIds_0='?' (DbType = Object)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name", t."Id", t."ConversationId", t."JoinedAt", t."LastReadAt", t."UserId", t."Id0", t."Active", t."CreatedAt", t."Email", t."FullName", t."LastLoginAt", t."PasswordHash", t."Phone"
      FROM "ChatConversations" AS c
      LEFT JOIN (
          SELECT c0."Id", c0."ConversationId", c0."JoinedAt", c0."LastReadAt", c0."UserId", u."Id" AS "Id0", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
          FROM "ChatParticipants" AS c0
          INNER JOIN "Users" AS u ON c0."UserId" = u."Id"
      ) AS t ON c."Id" = t."ConversationId"
      WHERE c."Id" = ANY (@__convIds_0)
      ORDER BY c."LastMessageAt" DESC, c."Id", t."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "ChatMessages" AS c
      INNER JOIN "Users" AS u ON c."SenderId" = u."Id"
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0
      ORDER BY c."SentAt" DESC
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "ChatMessages" AS c
      INNER JOIN "Users" AS u ON c."SenderId" = u."Id"
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0
      ORDER BY c."SentAt" DESC
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32), @__participant_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0 AND c."SentAt" > @__participant_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32), @__participant_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0 AND c."SentAt" > @__participant_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__convIds_0='?' (DbType = Object)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name", t."Id", t."ConversationId", t."JoinedAt", t."LastReadAt", t."UserId", t."Id0", t."Active", t."CreatedAt", t."Email", t."FullName", t."LastLoginAt", t."PasswordHash", t."Phone"
      FROM "ChatConversations" AS c
      LEFT JOIN (
          SELECT c0."Id", c0."ConversationId", c0."JoinedAt", c0."LastReadAt", c0."UserId", u."Id" AS "Id0", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
          FROM "ChatParticipants" AS c0
          INNER JOIN "Users" AS u ON c0."UserId" = u."Id"
      ) AS t ON c."Id" = t."ConversationId"
      WHERE c."Id" = ANY (@__convIds_0)
      ORDER BY c."LastMessageAt" DESC, c."Id", t."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "ChatMessages" AS c
      INNER JOIN "Users" AS u ON c."SenderId" = u."Id"
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0
      ORDER BY c."SentAt" DESC
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32), @__participant_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0 AND c."SentAt" > @__participant_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT u."Id", u."FullName", u."Email"
      FROM "Users" AS u
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT t."Id", t."Content", t."ConversationId", t."SenderId", t."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM (
          SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt"
          FROM "ChatMessages" AS c
          WHERE c."ConversationId" = @__conversationId_0
          ORDER BY c."SentAt" DESC
          LIMIT @__p_1
      ) AS t
      INNER JOIN "Users" AS u ON t."SenderId" = u."Id"
      ORDER BY t."SentAt" DESC
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."ConversationId", c."JoinedAt", c."LastReadAt", c."UserId"
      FROM "ChatParticipants" AS c
      WHERE c."ConversationId" = @__conversationId_0 AND c."UserId" = @__userId_1
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32), @p8='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
      UPDATE "ChatParticipants" SET "LastReadAt" = @p7
      WHERE "Id" = @p8;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."ConversationId", c."JoinedAt", c."LastReadAt", c."UserId"
      FROM "ChatParticipants" AS c
      WHERE c."ConversationId" = @__conversationId_0 AND c."UserId" = @__userId_1
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32), @p8='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
      UPDATE "ChatParticipants" SET "LastReadAt" = @p7
      WHERE "Id" = @p8;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name"
      FROM "ChatConversations" AS c
      WHERE c."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__senderId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."ConversationId", c."JoinedAt", c."LastReadAt", c."UserId"
      FROM "ChatParticipants" AS c
      WHERE c."ConversationId" = @__conversationId_0 AND c."UserId" = @__senderId_1
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32), @p7='?', @p8='?' (DbType = DateTime), @p9='?', @p10='?' (DbType = Int32), @p11='?', @p12='?', @p13='?' (DbType = Int32), @p15='?' (DbType = Int32), @p14='?' (DbType = DateTime), @p16='?', @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime), @p21='?' (DbType = Int32), @p20='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p7, @p8, @p9, @p10, @p11, @p12, @p13)
      RETURNING "Id";
      UPDATE "ChatConversations" SET "LastMessageAt" = @p14
      WHERE "Id" = @p15;
      INSERT INTO "ChatMessages" ("Content", "ConversationId", "SenderId", "SentAt")
      VALUES (@p16, @p17, @p18, @p19)
      RETURNING "Id";
      UPDATE "ChatParticipants" SET "LastReadAt" = @p20
      WHERE "Id" = @p21;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "Users" AS u
      WHERE u."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__convIds_0='?' (DbType = Object)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name", t."Id", t."ConversationId", t."JoinedAt", t."LastReadAt", t."UserId", t."Id0", t."Active", t."CreatedAt", t."Email", t."FullName", t."LastLoginAt", t."PasswordHash", t."Phone"
      FROM "ChatConversations" AS c
      LEFT JOIN (
          SELECT c0."Id", c0."ConversationId", c0."JoinedAt", c0."LastReadAt", c0."UserId", u."Id" AS "Id0", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
          FROM "ChatParticipants" AS c0
          INNER JOIN "Users" AS u ON c0."UserId" = u."Id"
      ) AS t ON c."Id" = t."ConversationId"
      WHERE c."Id" = ANY (@__convIds_0)
      ORDER BY c."LastMessageAt" DESC, c."Id", t."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "ChatMessages" AS c
      INNER JOIN "Users" AS u ON c."SenderId" = u."Id"
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0
      ORDER BY c."SentAt" DESC
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32), @__participant_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0 AND c."SentAt" > @__participant_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__convIds_0='?' (DbType = Object)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name", t."Id", t."ConversationId", t."JoinedAt", t."LastReadAt", t."UserId", t."Id0", t."Active", t."CreatedAt", t."Email", t."FullName", t."LastLoginAt", t."PasswordHash", t."Phone"
      FROM "ChatConversations" AS c
      LEFT JOIN (
          SELECT c0."Id", c0."ConversationId", c0."JoinedAt", c0."LastReadAt", c0."UserId", u."Id" AS "Id0", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
          FROM "ChatParticipants" AS c0
          INNER JOIN "Users" AS u ON c0."UserId" = u."Id"
      ) AS t ON c."Id" = t."ConversationId"
      WHERE c."Id" = ANY (@__convIds_0)
      ORDER BY c."LastMessageAt" DESC, c."Id", t."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "ChatMessages" AS c
      INNER JOIN "Users" AS u ON c."SenderId" = u."Id"
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0
      ORDER BY c."SentAt" DESC
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32), @__participant_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0 AND c."SentAt" > @__participant_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__convIds_0='?' (DbType = Object)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name", t."Id", t."ConversationId", t."JoinedAt", t."LastReadAt", t."UserId", t."Id0", t."Active", t."CreatedAt", t."Email", t."FullName", t."LastLoginAt", t."PasswordHash", t."Phone"
      FROM "ChatConversations" AS c
      LEFT JOIN (
          SELECT c0."Id", c0."ConversationId", c0."JoinedAt", c0."LastReadAt", c0."UserId", u."Id" AS "Id0", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
          FROM "ChatParticipants" AS c0
          INNER JOIN "Users" AS u ON c0."UserId" = u."Id"
      ) AS t ON c."Id" = t."ConversationId"
      WHERE c."Id" = ANY (@__convIds_0)
      ORDER BY c."LastMessageAt" DESC, c."Id", t."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "ChatMessages" AS c
      INNER JOIN "Users" AS u ON c."SenderId" = u."Id"
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0
      ORDER BY c."SentAt" DESC
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32), @__participant_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0 AND c."SentAt" > @__participant_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (3ms) [Parameters=[@__now_0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      SELECT t."Id", t."Title", t."AssigneeId", t0."Name" AS "ProjectName"
      FROM "Tasks" AS t
      INNER JOIN (
          SELECT p."Id", p."Name"
          FROM "Projects" AS p
          WHERE NOT (p."IsDeleted")
      ) AS t0 ON t."ProjectId" = t0."Id"
      WHERE t."DueDate" IS NOT NULL AND t."DueDate" < @__now_0 AND t."AssigneeId" IS NOT NULL
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT n."RelatedEntityId"
      FROM "Notifications" AS n
      WHERE n."Type" = 'TaskOverdue' AND NOT (n."IsRead") AND n."RelatedEntityType" = 'Task'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__now_0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      SELECT r."Id", r."Title", r."UserId"
      FROM "Reminders" AS r
      WHERE r."DueDate" < @__now_0 AND NOT (r."IsCompleted")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT n."RelatedEntityId"
      FROM "Notifications" AS n
      WHERE n."Type" = 'ReminderDue' AND NOT (n."IsRead") AND n."RelatedEntityType" = 'Reminder'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__convIds_0='?' (DbType = Object)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name", t."Id", t."ConversationId", t."JoinedAt", t."LastReadAt", t."UserId", t."Id0", t."Active", t."CreatedAt", t."Email", t."FullName", t."LastLoginAt", t."PasswordHash", t."Phone"
      FROM "ChatConversations" AS c
      LEFT JOIN (
          SELECT c0."Id", c0."ConversationId", c0."JoinedAt", c0."LastReadAt", c0."UserId", u."Id" AS "Id0", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
          FROM "ChatParticipants" AS c0
          INNER JOIN "Users" AS u ON c0."UserId" = u."Id"
      ) AS t ON c."Id" = t."ConversationId"
      WHERE c."Id" = ANY (@__convIds_0)
      ORDER BY c."LastMessageAt" DESC, c."Id", t."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "ChatMessages" AS c
      INNER JOIN "Users" AS u ON c."SenderId" = u."Id"
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0
      ORDER BY c."SentAt" DESC
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32), @__participant_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0 AND c."SentAt" > @__participant_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT u."Id", u."FullName", u."Email"
      FROM "Users" AS u
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@__request_Email_0='?'], CommandType='Text', CommandTimeout='30']
      SELECT t."Id", t."Active", t."CreatedAt", t."Email", t."FullName", t."LastLoginAt", t."PasswordHash", t."Phone", t0."UserId", t0."RoleId", t0."Id", t0."Name"
      FROM (
          SELECT u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
          FROM "Users" AS u
          WHERE u."Email" = @__request_Email_0 AND u."Active"
          LIMIT 1
      ) AS t
      LEFT JOIN (
          SELECT u0."UserId", u0."RoleId", r."Id", r."Name"
          FROM "UserRoles" AS u0
          INNER JOIN "Roles" AS r ON u0."RoleId" = r."Id"
      ) AS t0 ON t."Id" = t0."UserId"
      ORDER BY t."Id", t0."UserId", t0."RoleId"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "Users" SET "LastLoginAt" = @p0
      WHERE "Id" = @p1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__convIds_0='?' (DbType = Object)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name", t."Id", t."ConversationId", t."JoinedAt", t."LastReadAt", t."UserId", t."Id0", t."Active", t."CreatedAt", t."Email", t."FullName", t."LastLoginAt", t."PasswordHash", t."Phone"
      FROM "ChatConversations" AS c
      LEFT JOIN (
          SELECT c0."Id", c0."ConversationId", c0."JoinedAt", c0."LastReadAt", c0."UserId", u."Id" AS "Id0", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
          FROM "ChatParticipants" AS c0
          INNER JOIN "Users" AS u ON c0."UserId" = u."Id"
      ) AS t ON c."Id" = t."ConversationId"
      WHERE c."Id" = ANY (@__convIds_0)
      ORDER BY c."LastMessageAt" DESC, c."Id", t."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "ChatMessages" AS c
      INNER JOIN "Users" AS u ON c."SenderId" = u."Id"
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0
      ORDER BY c."SentAt" DESC
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32), @__participant_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0 AND c."SentAt" > @__participant_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Companies" AS c
      WHERE NOT (c."IsDeleted")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Projects" AS p
      WHERE NOT (p."IsDeleted")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Tasks" AS t
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Users" AS u
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Contacts" AS c
      WHERE NOT (c."IsDeleted")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__now_0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Tasks" AS t
      WHERE t."DueDate" < @__now_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COALESCE(sum(t."Hours"), 0.0)
      FROM "TimeEntries" AS t
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__monthStart_0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      SELECT COALESCE(sum(t."Hours"), 0.0)
      FROM "TimeEntries" AS t
      WHERE t."Date" >= @__monthStart_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT t3."ProjectId", t3."Name" AS "ProjectName", t3."Name0" AS "CompanyName", COALESCE(sum(t3."Hours"), 0.0) AS "TotalHours", t3."EstimatedHours0" AS "EstimatedHours"
      FROM (
          SELECT t."Hours", t0."ProjectId", t1."Name", t2."Name" AS "Name0", COALESCE(t1."EstimatedHours", 0.0) AS "EstimatedHours0"
          FROM "TimeEntries" AS t
          INNER JOIN "Tasks" AS t0 ON t."TaskId" = t0."Id"
          INNER JOIN (
              SELECT p."Id", p."CompanyId", p."EstimatedHours", p."Name"
              FROM "Projects" AS p
              WHERE NOT (p."IsDeleted")
          ) AS t1 ON t0."ProjectId" = t1."Id"
          INNER JOIN (
              SELECT c."Id", c."Name"
              FROM "Companies" AS c
              WHERE NOT (c."IsDeleted")
          ) AS t2 ON t1."CompanyId" = t2."Id"
      ) AS t3
      GROUP BY t3."ProjectId", t3."Name", t3."Name0", t3."EstimatedHours0"
      ORDER BY COALESCE(sum(t3."Hours"), 0.0) DESC
      LIMIT @__p_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@__monthStart_0='?' (DbType = DateTime), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT t."UserId", u."FullName" AS "UserName", COALESCE(sum(t."Hours"), 0.0) AS "TotalHours", COALESCE(sum(t."Hours") FILTER (WHERE t."Date" >= @__monthStart_0), 0.0) AS "HoursThisMonth"
      FROM "TimeEntries" AS t
      INNER JOIN "Users" AS u ON t."UserId" = u."Id"
      GROUP BY t."UserId", u."FullName"
      ORDER BY COALESCE(sum(t."Hours"), 0.0) DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT p."Status", count(*)::int
      FROM "Projects" AS p
      WHERE NOT (p."IsDeleted")
      GROUP BY p."Status"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT t."Priority", count(*)::int
      FROM "Tasks" AS t
      GROUP BY t."Priority"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@__now_0='?' (DbType = DateTime), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT p."Id", p."Name", p."Status", (
          SELECT count(*)::int
          FROM "Tasks" AS t2
          WHERE p."Id" = t2."ProjectId"), (
          SELECT count(*)::int
          FROM "Tasks" AS t3
          LEFT JOIN "BoardColumns" AS b ON t3."ColumnId" = b."Id"
          WHERE p."Id" = t3."ProjectId" AND b."Id" IS NOT NULL AND (b."SortOrder" = (
              SELECT max(b0."SortOrder")
              FROM "BoardColumns" AS b0
              WHERE b0."ProjectId" = p."Id") OR (b."SortOrder" IS NULL AND (
              SELECT max(b0."SortOrder")
              FROM "BoardColumns" AS b0
              WHERE b0."ProjectId" = p."Id") IS NULL))), (
          SELECT count(*)::int
          FROM "Tasks" AS t4
          WHERE p."Id" = t4."ProjectId" AND t4."DueDate" IS NOT NULL AND t4."DueDate" < @__now_0), COALESCE(p."EstimatedHours", 0.0), (
          SELECT COALESCE(sum(t6."Hours"), 0.0)
          FROM "Tasks" AS t5
          INNER JOIN "TimeEntries" AS t6 ON t5."Id" = t6."TaskId"
          WHERE p."Id" = t5."ProjectId"), CASE
          WHEN COALESCE(p."EstimatedHours", 0.0) > 0.0 THEN round(((
              SELECT COALESCE(sum(t8."Hours"), 0.0)
              FROM "Tasks" AS t7
              INNER JOIN "TimeEntries" AS t8 ON t7."Id" = t8."TaskId"
              WHERE p."Id" = t7."ProjectId") / COALESCE(p."EstimatedHours", 1.0)) * 100.0, 1)
          ELSE 0.0
      END
      FROM "Projects" AS p
      WHERE NOT (p."IsDeleted") AND (
          SELECT count(*)::int
          FROM "Tasks" AS t
          WHERE p."Id" = t."ProjectId") > 0
      ORDER BY CASE
          WHEN COALESCE(p."EstimatedHours", 0.0) > 0.0 THEN round(((
              SELECT COALESCE(sum(t1."Hours"), 0.0)
              FROM "Tasks" AS t0
              INNER JOIN "TimeEntries" AS t1 ON t0."Id" = t1."TaskId"
              WHERE p."Id" = t0."ProjectId") / COALESCE(p."EstimatedHours", 1.0)) * 100.0, 1)
          ELSE 0.0
      END DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT t."Id", t."Type", t."Description", u."FullName" AS "UserName", CASE
          WHEN t0."Id" IS NOT NULL THEN t0."Name"
          WHEN t1."Id" IS NOT NULL THEN t1."FullName"
          WHEN t2."Id" IS NOT NULL THEN t2."Name"
          ELSE NULL
      END AS "EntityName", t."CreatedAt"
      FROM (
          SELECT a."Id", a."CompanyId", a."ContactId", a."CreatedAt", a."Description", a."ProjectId", a."Type", a."UserId"
          FROM "ActivityLogs" AS a
          ORDER BY a."CreatedAt" DESC
          LIMIT @__p_0
      ) AS t
      INNER JOIN "Users" AS u ON t."UserId" = u."Id"
      LEFT JOIN (
          SELECT c."Id", c."Name"
          FROM "Companies" AS c
          WHERE NOT (c."IsDeleted")
      ) AS t0 ON t."CompanyId" = t0."Id"
      LEFT JOIN (
          SELECT c0."Id", c0."FullName"
          FROM "Contacts" AS c0
          WHERE NOT (c0."IsDeleted")
      ) AS t1 ON t."ContactId" = t1."Id"
      LEFT JOIN (
          SELECT p."Id", p."Name"
          FROM "Projects" AS p
          WHERE NOT (p."IsDeleted")
      ) AS t2 ON t."ProjectId" = t2."Id"
      ORDER BY t."CreatedAt" DESC
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Deals" AS d
      WHERE NOT (d."IsDeleted")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COALESCE(sum(COALESCE(d."Value", 0.0)), 0.0)
      FROM "Deals" AS d
      WHERE NOT (d."IsDeleted") AND d."Stage" <> 'ClosedLost'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT d."Stage", count(*)::int, COALESCE(sum(COALESCE(d."Value", 0.0)), 0.0)
      FROM "Deals" AS d
      WHERE NOT (d."IsDeleted")
      GROUP BY d."Stage"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__now_0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Reminders" AS r
      WHERE NOT (r."IsCompleted") AND r."DueDate" < @__now_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Companies" AS c
      WHERE NOT (c."IsDeleted")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Projects" AS p
      WHERE NOT (p."IsDeleted")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Tasks" AS t
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Users" AS u
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Contacts" AS c
      WHERE NOT (c."IsDeleted")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__now_0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Tasks" AS t
      WHERE t."DueDate" < @__now_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COALESCE(sum(t."Hours"), 0.0)
      FROM "TimeEntries" AS t
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__monthStart_0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      SELECT COALESCE(sum(t."Hours"), 0.0)
      FROM "TimeEntries" AS t
      WHERE t."Date" >= @__monthStart_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT t3."ProjectId", t3."Name" AS "ProjectName", t3."Name0" AS "CompanyName", COALESCE(sum(t3."Hours"), 0.0) AS "TotalHours", t3."EstimatedHours0" AS "EstimatedHours"
      FROM (
          SELECT t."Hours", t0."ProjectId", t1."Name", t2."Name" AS "Name0", COALESCE(t1."EstimatedHours", 0.0) AS "EstimatedHours0"
          FROM "TimeEntries" AS t
          INNER JOIN "Tasks" AS t0 ON t."TaskId" = t0."Id"
          INNER JOIN (
              SELECT p."Id", p."CompanyId", p."EstimatedHours", p."Name"
              FROM "Projects" AS p
              WHERE NOT (p."IsDeleted")
          ) AS t1 ON t0."ProjectId" = t1."Id"
          INNER JOIN (
              SELECT c."Id", c."Name"
              FROM "Companies" AS c
              WHERE NOT (c."IsDeleted")
          ) AS t2 ON t1."CompanyId" = t2."Id"
      ) AS t3
      GROUP BY t3."ProjectId", t3."Name", t3."Name0", t3."EstimatedHours0"
      ORDER BY COALESCE(sum(t3."Hours"), 0.0) DESC
      LIMIT @__p_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__monthStart_0='?' (DbType = DateTime), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT t."UserId", u."FullName" AS "UserName", COALESCE(sum(t."Hours"), 0.0) AS "TotalHours", COALESCE(sum(t."Hours") FILTER (WHERE t."Date" >= @__monthStart_0), 0.0) AS "HoursThisMonth"
      FROM "TimeEntries" AS t
      INNER JOIN "Users" AS u ON t."UserId" = u."Id"
      GROUP BY t."UserId", u."FullName"
      ORDER BY COALESCE(sum(t."Hours"), 0.0) DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT p."Status", count(*)::int
      FROM "Projects" AS p
      WHERE NOT (p."IsDeleted")
      GROUP BY p."Status"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT t."Priority", count(*)::int
      FROM "Tasks" AS t
      GROUP BY t."Priority"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@__now_0='?' (DbType = DateTime), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT p."Id", p."Name", p."Status", (
          SELECT count(*)::int
          FROM "Tasks" AS t2
          WHERE p."Id" = t2."ProjectId"), (
          SELECT count(*)::int
          FROM "Tasks" AS t3
          LEFT JOIN "BoardColumns" AS b ON t3."ColumnId" = b."Id"
          WHERE p."Id" = t3."ProjectId" AND b."Id" IS NOT NULL AND (b."SortOrder" = (
              SELECT max(b0."SortOrder")
              FROM "BoardColumns" AS b0
              WHERE b0."ProjectId" = p."Id") OR (b."SortOrder" IS NULL AND (
              SELECT max(b0."SortOrder")
              FROM "BoardColumns" AS b0
              WHERE b0."ProjectId" = p."Id") IS NULL))), (
          SELECT count(*)::int
          FROM "Tasks" AS t4
          WHERE p."Id" = t4."ProjectId" AND t4."DueDate" IS NOT NULL AND t4."DueDate" < @__now_0), COALESCE(p."EstimatedHours", 0.0), (
          SELECT COALESCE(sum(t6."Hours"), 0.0)
          FROM "Tasks" AS t5
          INNER JOIN "TimeEntries" AS t6 ON t5."Id" = t6."TaskId"
          WHERE p."Id" = t5."ProjectId"), CASE
          WHEN COALESCE(p."EstimatedHours", 0.0) > 0.0 THEN round(((
              SELECT COALESCE(sum(t8."Hours"), 0.0)
              FROM "Tasks" AS t7
              INNER JOIN "TimeEntries" AS t8 ON t7."Id" = t8."TaskId"
              WHERE p."Id" = t7."ProjectId") / COALESCE(p."EstimatedHours", 1.0)) * 100.0, 1)
          ELSE 0.0
      END
      FROM "Projects" AS p
      WHERE NOT (p."IsDeleted") AND (
          SELECT count(*)::int
          FROM "Tasks" AS t
          WHERE p."Id" = t."ProjectId") > 0
      ORDER BY CASE
          WHEN COALESCE(p."EstimatedHours", 0.0) > 0.0 THEN round(((
              SELECT COALESCE(sum(t1."Hours"), 0.0)
              FROM "Tasks" AS t0
              INNER JOIN "TimeEntries" AS t1 ON t0."Id" = t1."TaskId"
              WHERE p."Id" = t0."ProjectId") / COALESCE(p."EstimatedHours", 1.0)) * 100.0, 1)
          ELSE 0.0
      END DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT t."Id", t."Type", t."Description", u."FullName" AS "UserName", CASE
          WHEN t0."Id" IS NOT NULL THEN t0."Name"
          WHEN t1."Id" IS NOT NULL THEN t1."FullName"
          WHEN t2."Id" IS NOT NULL THEN t2."Name"
          ELSE NULL
      END AS "EntityName", t."CreatedAt"
      FROM (
          SELECT a."Id", a."CompanyId", a."ContactId", a."CreatedAt", a."Description", a."ProjectId", a."Type", a."UserId"
          FROM "ActivityLogs" AS a
          ORDER BY a."CreatedAt" DESC
          LIMIT @__p_0
      ) AS t
      INNER JOIN "Users" AS u ON t."UserId" = u."Id"
      LEFT JOIN (
          SELECT c."Id", c."Name"
          FROM "Companies" AS c
          WHERE NOT (c."IsDeleted")
      ) AS t0 ON t."CompanyId" = t0."Id"
      LEFT JOIN (
          SELECT c0."Id", c0."FullName"
          FROM "Contacts" AS c0
          WHERE NOT (c0."IsDeleted")
      ) AS t1 ON t."ContactId" = t1."Id"
      LEFT JOIN (
          SELECT p."Id", p."Name"
          FROM "Projects" AS p
          WHERE NOT (p."IsDeleted")
      ) AS t2 ON t."ProjectId" = t2."Id"
      ORDER BY t."CreatedAt" DESC
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Deals" AS d
      WHERE NOT (d."IsDeleted")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COALESCE(sum(COALESCE(d."Value", 0.0)), 0.0)
      FROM "Deals" AS d
      WHERE NOT (d."IsDeleted") AND d."Stage" <> 'ClosedLost'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT d."Stage", count(*)::int, COALESCE(sum(COALESCE(d."Value", 0.0)), 0.0)
      FROM "Deals" AS d
      WHERE NOT (d."IsDeleted")
      GROUP BY d."Stage"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__now_0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Reminders" AS r
      WHERE NOT (r."IsCompleted") AND r."DueDate" < @__now_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__convIds_0='?' (DbType = Object)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name", t."Id", t."ConversationId", t."JoinedAt", t."LastReadAt", t."UserId", t."Id0", t."Active", t."CreatedAt", t."Email", t."FullName", t."LastLoginAt", t."PasswordHash", t."Phone"
      FROM "ChatConversations" AS c
      LEFT JOIN (
          SELECT c0."Id", c0."ConversationId", c0."JoinedAt", c0."LastReadAt", c0."UserId", u."Id" AS "Id0", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
          FROM "ChatParticipants" AS c0
          INNER JOIN "Users" AS u ON c0."UserId" = u."Id"
      ) AS t ON c."Id" = t."ConversationId"
      WHERE c."Id" = ANY (@__convIds_0)
      ORDER BY c."LastMessageAt" DESC, c."Id", t."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "ChatMessages" AS c
      INNER JOIN "Users" AS u ON c."SenderId" = u."Id"
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0
      ORDER BY c."SentAt" DESC
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32), @__participant_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0 AND c."SentAt" > @__participant_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT u."Id", u."FullName", u."Email"
      FROM "Users" AS u
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT t."Id", t."Content", t."ConversationId", t."SenderId", t."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM (
          SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt"
          FROM "ChatMessages" AS c
          WHERE c."ConversationId" = @__conversationId_0
          ORDER BY c."SentAt" DESC
          LIMIT @__p_1
      ) AS t
      INNER JOIN "Users" AS u ON t."SenderId" = u."Id"
      ORDER BY t."SentAt" DESC
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."ConversationId", c."JoinedAt", c."LastReadAt", c."UserId"
      FROM "ChatParticipants" AS c
      WHERE c."ConversationId" = @__conversationId_0 AND c."UserId" = @__userId_1
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32), @p8='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
      UPDATE "ChatParticipants" SET "LastReadAt" = @p7
      WHERE "Id" = @p8;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."ConversationId", c."JoinedAt", c."LastReadAt", c."UserId"
      FROM "ChatParticipants" AS c
      WHERE c."ConversationId" = @__conversationId_0 AND c."UserId" = @__userId_1
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32), @p8='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
      UPDATE "ChatParticipants" SET "LastReadAt" = @p7
      WHERE "Id" = @p8;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name"
      FROM "ChatConversations" AS c
      WHERE c."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__senderId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."ConversationId", c."JoinedAt", c."LastReadAt", c."UserId"
      FROM "ChatParticipants" AS c
      WHERE c."ConversationId" = @__conversationId_0 AND c."UserId" = @__senderId_1
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32), @p7='?', @p8='?' (DbType = DateTime), @p9='?', @p10='?' (DbType = Int32), @p11='?', @p12='?', @p13='?' (DbType = Int32), @p15='?' (DbType = Int32), @p14='?' (DbType = DateTime), @p16='?', @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime), @p21='?' (DbType = Int32), @p20='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p7, @p8, @p9, @p10, @p11, @p12, @p13)
      RETURNING "Id";
      UPDATE "ChatConversations" SET "LastMessageAt" = @p14
      WHERE "Id" = @p15;
      INSERT INTO "ChatMessages" ("Content", "ConversationId", "SenderId", "SentAt")
      VALUES (@p16, @p17, @p18, @p19)
      RETURNING "Id";
      UPDATE "ChatParticipants" SET "LastReadAt" = @p20
      WHERE "Id" = @p21;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "Users" AS u
      WHERE u."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__convIds_0='?' (DbType = Object)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name", t."Id", t."ConversationId", t."JoinedAt", t."LastReadAt", t."UserId", t."Id0", t."Active", t."CreatedAt", t."Email", t."FullName", t."LastLoginAt", t."PasswordHash", t."Phone"
      FROM "ChatConversations" AS c
      LEFT JOIN (
          SELECT c0."Id", c0."ConversationId", c0."JoinedAt", c0."LastReadAt", c0."UserId", u."Id" AS "Id0", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
          FROM "ChatParticipants" AS c0
          INNER JOIN "Users" AS u ON c0."UserId" = u."Id"
      ) AS t ON c."Id" = t."ConversationId"
      WHERE c."Id" = ANY (@__convIds_0)
      ORDER BY c."LastMessageAt" DESC, c."Id", t."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "ChatMessages" AS c
      INNER JOIN "Users" AS u ON c."SenderId" = u."Id"
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0
      ORDER BY c."SentAt" DESC
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32), @__participant_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0 AND c."SentAt" > @__participant_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT t."Id", t."Content", t."ConversationId", t."SenderId", t."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM (
          SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt"
          FROM "ChatMessages" AS c
          WHERE c."ConversationId" = @__conversationId_0
          ORDER BY c."SentAt" DESC
          LIMIT @__p_1
      ) AS t
      INNER JOIN "Users" AS u ON t."SenderId" = u."Id"
      ORDER BY t."SentAt" DESC
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."ConversationId", c."JoinedAt", c."LastReadAt", c."UserId"
      FROM "ChatParticipants" AS c
      WHERE c."ConversationId" = @__conversationId_0 AND c."UserId" = @__userId_1
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32), @p8='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
      UPDATE "ChatParticipants" SET "LastReadAt" = @p7
      WHERE "Id" = @p8;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."ConversationId", c."JoinedAt", c."LastReadAt", c."UserId"
      FROM "ChatParticipants" AS c
      WHERE c."ConversationId" = @__conversationId_0 AND c."UserId" = @__userId_1
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32), @p8='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
      UPDATE "ChatParticipants" SET "LastReadAt" = @p7
      WHERE "Id" = @p8;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT t."Id", t."Content", t."ConversationId", t."SenderId", t."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM (
          SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt"
          FROM "ChatMessages" AS c
          WHERE c."ConversationId" = @__conversationId_0
          ORDER BY c."SentAt" DESC
          LIMIT @__p_1
      ) AS t
      INNER JOIN "Users" AS u ON t."SenderId" = u."Id"
      ORDER BY t."SentAt" DESC
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."ConversationId", c."JoinedAt", c."LastReadAt", c."UserId"
      FROM "ChatParticipants" AS c
      WHERE c."ConversationId" = @__conversationId_0 AND c."UserId" = @__userId_1
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32), @p8='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
      UPDATE "ChatParticipants" SET "LastReadAt" = @p7
      WHERE "Id" = @p8;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."ConversationId", c."JoinedAt", c."LastReadAt", c."UserId"
      FROM "ChatParticipants" AS c
      WHERE c."ConversationId" = @__conversationId_0 AND c."UserId" = @__userId_1
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32), @p8='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
      UPDATE "ChatParticipants" SET "LastReadAt" = @p7
      WHERE "Id" = @p8;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name"
      FROM "ChatConversations" AS c
      WHERE c."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__senderId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."ConversationId", c."JoinedAt", c."LastReadAt", c."UserId"
      FROM "ChatParticipants" AS c
      WHERE c."ConversationId" = @__conversationId_0 AND c."UserId" = @__senderId_1
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32), @p7='?', @p8='?' (DbType = DateTime), @p9='?', @p10='?' (DbType = Int32), @p11='?', @p12='?', @p13='?' (DbType = Int32), @p15='?' (DbType = Int32), @p14='?' (DbType = DateTime), @p16='?', @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime), @p21='?' (DbType = Int32), @p20='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p7, @p8, @p9, @p10, @p11, @p12, @p13)
      RETURNING "Id";
      UPDATE "ChatConversations" SET "LastMessageAt" = @p14
      WHERE "Id" = @p15;
      INSERT INTO "ChatMessages" ("Content", "ConversationId", "SenderId", "SentAt")
      VALUES (@p16, @p17, @p18, @p19)
      RETURNING "Id";
      UPDATE "ChatParticipants" SET "LastReadAt" = @p20
      WHERE "Id" = @p21;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "Users" AS u
      WHERE u."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__convIds_0='?' (DbType = Object)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name", t."Id", t."ConversationId", t."JoinedAt", t."LastReadAt", t."UserId", t."Id0", t."Active", t."CreatedAt", t."Email", t."FullName", t."LastLoginAt", t."PasswordHash", t."Phone"
      FROM "ChatConversations" AS c
      LEFT JOIN (
          SELECT c0."Id", c0."ConversationId", c0."JoinedAt", c0."LastReadAt", c0."UserId", u."Id" AS "Id0", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
          FROM "ChatParticipants" AS c0
          INNER JOIN "Users" AS u ON c0."UserId" = u."Id"
      ) AS t ON c."Id" = t."ConversationId"
      WHERE c."Id" = ANY (@__convIds_0)
      ORDER BY c."LastMessageAt" DESC, c."Id", t."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "ChatMessages" AS c
      INNER JOIN "Users" AS u ON c."SenderId" = u."Id"
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0
      ORDER BY c."SentAt" DESC
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32), @__participant_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0 AND c."SentAt" > @__participant_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name"
      FROM "ChatConversations" AS c
      WHERE c."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__senderId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."ConversationId", c."JoinedAt", c."LastReadAt", c."UserId"
      FROM "ChatParticipants" AS c
      WHERE c."ConversationId" = @__conversationId_0 AND c."UserId" = @__senderId_1
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (3ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32), @p7='?', @p8='?' (DbType = DateTime), @p9='?', @p10='?' (DbType = Int32), @p11='?', @p12='?', @p13='?' (DbType = Int32), @p15='?' (DbType = Int32), @p14='?' (DbType = DateTime), @p16='?', @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime), @p21='?' (DbType = Int32), @p20='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p7, @p8, @p9, @p10, @p11, @p12, @p13)
      RETURNING "Id";
      UPDATE "ChatConversations" SET "LastMessageAt" = @p14
      WHERE "Id" = @p15;
      INSERT INTO "ChatMessages" ("Content", "ConversationId", "SenderId", "SentAt")
      VALUES (@p16, @p17, @p18, @p19)
      RETURNING "Id";
      UPDATE "ChatParticipants" SET "LastReadAt" = @p20
      WHERE "Id" = @p21;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "Users" AS u
      WHERE u."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__convIds_0='?' (DbType = Object)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name", t."Id", t."ConversationId", t."JoinedAt", t."LastReadAt", t."UserId", t."Id0", t."Active", t."CreatedAt", t."Email", t."FullName", t."LastLoginAt", t."PasswordHash", t."Phone"
      FROM "ChatConversations" AS c
      LEFT JOIN (
          SELECT c0."Id", c0."ConversationId", c0."JoinedAt", c0."LastReadAt", c0."UserId", u."Id" AS "Id0", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
          FROM "ChatParticipants" AS c0
          INNER JOIN "Users" AS u ON c0."UserId" = u."Id"
      ) AS t ON c."Id" = t."ConversationId"
      WHERE c."Id" = ANY (@__convIds_0)
      ORDER BY c."LastMessageAt" DESC, c."Id", t."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "ChatMessages" AS c
      INNER JOIN "Users" AS u ON c."SenderId" = u."Id"
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0
      ORDER BY c."SentAt" DESC
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32), @__participant_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0 AND c."SentAt" > @__participant_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name"
      FROM "ChatConversations" AS c
      WHERE c."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__senderId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."ConversationId", c."JoinedAt", c."LastReadAt", c."UserId"
      FROM "ChatParticipants" AS c
      WHERE c."ConversationId" = @__conversationId_0 AND c."UserId" = @__senderId_1
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32), @p7='?', @p8='?' (DbType = DateTime), @p9='?', @p10='?' (DbType = Int32), @p11='?', @p12='?', @p13='?' (DbType = Int32), @p15='?' (DbType = Int32), @p14='?' (DbType = DateTime), @p16='?', @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime), @p21='?' (DbType = Int32), @p20='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p7, @p8, @p9, @p10, @p11, @p12, @p13)
      RETURNING "Id";
      UPDATE "ChatConversations" SET "LastMessageAt" = @p14
      WHERE "Id" = @p15;
      INSERT INTO "ChatMessages" ("Content", "ConversationId", "SenderId", "SentAt")
      VALUES (@p16, @p17, @p18, @p19)
      RETURNING "Id";
      UPDATE "ChatParticipants" SET "LastReadAt" = @p20
      WHERE "Id" = @p21;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "Users" AS u
      WHERE u."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__convIds_0='?' (DbType = Object)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name", t."Id", t."ConversationId", t."JoinedAt", t."LastReadAt", t."UserId", t."Id0", t."Active", t."CreatedAt", t."Email", t."FullName", t."LastLoginAt", t."PasswordHash", t."Phone"
      FROM "ChatConversations" AS c
      LEFT JOIN (
          SELECT c0."Id", c0."ConversationId", c0."JoinedAt", c0."LastReadAt", c0."UserId", u."Id" AS "Id0", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
          FROM "ChatParticipants" AS c0
          INNER JOIN "Users" AS u ON c0."UserId" = u."Id"
      ) AS t ON c."Id" = t."ConversationId"
      WHERE c."Id" = ANY (@__convIds_0)
      ORDER BY c."LastMessageAt" DESC, c."Id", t."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "ChatMessages" AS c
      INNER JOIN "Users" AS u ON c."SenderId" = u."Id"
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0
      ORDER BY c."SentAt" DESC
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32), @__participant_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0 AND c."SentAt" > @__participant_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT t."Id", t."Content", t."ConversationId", t."SenderId", t."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM (
          SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt"
          FROM "ChatMessages" AS c
          WHERE c."ConversationId" = @__conversationId_0
          ORDER BY c."SentAt" DESC
          LIMIT @__p_1
      ) AS t
      INNER JOIN "Users" AS u ON t."SenderId" = u."Id"
      ORDER BY t."SentAt" DESC
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."ConversationId", c."JoinedAt", c."LastReadAt", c."UserId"
      FROM "ChatParticipants" AS c
      WHERE c."ConversationId" = @__conversationId_0 AND c."UserId" = @__userId_1
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32), @p8='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
      UPDATE "ChatParticipants" SET "LastReadAt" = @p7
      WHERE "Id" = @p8;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."ConversationId", c."JoinedAt", c."LastReadAt", c."UserId"
      FROM "ChatParticipants" AS c
      WHERE c."ConversationId" = @__conversationId_0 AND c."UserId" = @__userId_1
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32), @p8='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
      UPDATE "ChatParticipants" SET "LastReadAt" = @p7
      WHERE "Id" = @p8;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@__convIds_0='?' (DbType = Object)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name", t."Id", t."ConversationId", t."JoinedAt", t."LastReadAt", t."UserId", t."Id0", t."Active", t."CreatedAt", t."Email", t."FullName", t."LastLoginAt", t."PasswordHash", t."Phone"
      FROM "ChatConversations" AS c
      LEFT JOIN (
          SELECT c0."Id", c0."ConversationId", c0."JoinedAt", c0."LastReadAt", c0."UserId", u."Id" AS "Id0", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
          FROM "ChatParticipants" AS c0
          INNER JOIN "Users" AS u ON c0."UserId" = u."Id"
      ) AS t ON c."Id" = t."ConversationId"
      WHERE c."Id" = ANY (@__convIds_0)
      ORDER BY c."LastMessageAt" DESC, c."Id", t."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "ChatMessages" AS c
      INNER JOIN "Users" AS u ON c."SenderId" = u."Id"
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0
      ORDER BY c."SentAt" DESC
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32), @__participant_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0 AND c."SentAt" > @__participant_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT u."Id", u."FullName", u."Email"
      FROM "Users" AS u
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT t."Id", t."Content", t."ConversationId", t."SenderId", t."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM (
          SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt"
          FROM "ChatMessages" AS c
          WHERE c."ConversationId" = @__conversationId_0
          ORDER BY c."SentAt" DESC
          LIMIT @__p_1
      ) AS t
      INNER JOIN "Users" AS u ON t."SenderId" = u."Id"
      ORDER BY t."SentAt" DESC
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."ConversationId", c."JoinedAt", c."LastReadAt", c."UserId"
      FROM "ChatParticipants" AS c
      WHERE c."ConversationId" = @__conversationId_0 AND c."UserId" = @__userId_1
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32), @p8='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
      UPDATE "ChatParticipants" SET "LastReadAt" = @p7
      WHERE "Id" = @p8;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."ConversationId", c."JoinedAt", c."LastReadAt", c."UserId"
      FROM "ChatParticipants" AS c
      WHERE c."ConversationId" = @__conversationId_0 AND c."UserId" = @__userId_1
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32), @p8='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
      UPDATE "ChatParticipants" SET "LastReadAt" = @p7
      WHERE "Id" = @p8;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name"
      FROM "ChatConversations" AS c
      WHERE c."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__senderId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."ConversationId", c."JoinedAt", c."LastReadAt", c."UserId"
      FROM "ChatParticipants" AS c
      WHERE c."ConversationId" = @__conversationId_0 AND c."UserId" = @__senderId_1
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (3ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32), @p7='?', @p8='?' (DbType = DateTime), @p9='?', @p10='?' (DbType = Int32), @p11='?', @p12='?', @p13='?' (DbType = Int32), @p15='?' (DbType = Int32), @p14='?' (DbType = DateTime), @p16='?', @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime), @p21='?' (DbType = Int32), @p20='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p7, @p8, @p9, @p10, @p11, @p12, @p13)
      RETURNING "Id";
      UPDATE "ChatConversations" SET "LastMessageAt" = @p14
      WHERE "Id" = @p15;
      INSERT INTO "ChatMessages" ("Content", "ConversationId", "SenderId", "SentAt")
      VALUES (@p16, @p17, @p18, @p19)
      RETURNING "Id";
      UPDATE "ChatParticipants" SET "LastReadAt" = @p20
      WHERE "Id" = @p21;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (8ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "Users" AS u
      WHERE u."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__convIds_0='?' (DbType = Object)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name", t."Id", t."ConversationId", t."JoinedAt", t."LastReadAt", t."UserId", t."Id0", t."Active", t."CreatedAt", t."Email", t."FullName", t."LastLoginAt", t."PasswordHash", t."Phone"
      FROM "ChatConversations" AS c
      LEFT JOIN (
          SELECT c0."Id", c0."ConversationId", c0."JoinedAt", c0."LastReadAt", c0."UserId", u."Id" AS "Id0", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
          FROM "ChatParticipants" AS c0
          INNER JOIN "Users" AS u ON c0."UserId" = u."Id"
      ) AS t ON c."Id" = t."ConversationId"
      WHERE c."Id" = ANY (@__convIds_0)
      ORDER BY c."LastMessageAt" DESC, c."Id", t."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "ChatMessages" AS c
      INNER JOIN "Users" AS u ON c."SenderId" = u."Id"
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0
      ORDER BY c."SentAt" DESC
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32), @__participant_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0 AND c."SentAt" > @__participant_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__convIds_0='?' (DbType = Object)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name", t."Id", t."ConversationId", t."JoinedAt", t."LastReadAt", t."UserId", t."Id0", t."Active", t."CreatedAt", t."Email", t."FullName", t."LastLoginAt", t."PasswordHash", t."Phone"
      FROM "ChatConversations" AS c
      LEFT JOIN (
          SELECT c0."Id", c0."ConversationId", c0."JoinedAt", c0."LastReadAt", c0."UserId", u."Id" AS "Id0", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
          FROM "ChatParticipants" AS c0
          INNER JOIN "Users" AS u ON c0."UserId" = u."Id"
      ) AS t ON c."Id" = t."ConversationId"
      WHERE c."Id" = ANY (@__convIds_0)
      ORDER BY c."LastMessageAt" DESC, c."Id", t."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "ChatMessages" AS c
      INNER JOIN "Users" AS u ON c."SenderId" = u."Id"
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0
      ORDER BY c."SentAt" DESC
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32), @__participant_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0 AND c."SentAt" > @__participant_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__convIds_0='?' (DbType = Object)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name", t."Id", t."ConversationId", t."JoinedAt", t."LastReadAt", t."UserId", t."Id0", t."Active", t."CreatedAt", t."Email", t."FullName", t."LastLoginAt", t."PasswordHash", t."Phone"
      FROM "ChatConversations" AS c
      LEFT JOIN (
          SELECT c0."Id", c0."ConversationId", c0."JoinedAt", c0."LastReadAt", c0."UserId", u."Id" AS "Id0", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
          FROM "ChatParticipants" AS c0
          INNER JOIN "Users" AS u ON c0."UserId" = u."Id"
      ) AS t ON c."Id" = t."ConversationId"
      WHERE c."Id" = ANY (@__convIds_0)
      ORDER BY c."LastMessageAt" DESC, c."Id", t."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "ChatMessages" AS c
      INNER JOIN "Users" AS u ON c."SenderId" = u."Id"
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0
      ORDER BY c."SentAt" DESC
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32), @__participant_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0 AND c."SentAt" > @__participant_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__convIds_0='?' (DbType = Object)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name", t."Id", t."ConversationId", t."JoinedAt", t."LastReadAt", t."UserId", t."Id0", t."Active", t."CreatedAt", t."Email", t."FullName", t."LastLoginAt", t."PasswordHash", t."Phone"
      FROM "ChatConversations" AS c
      LEFT JOIN (
          SELECT c0."Id", c0."ConversationId", c0."JoinedAt", c0."LastReadAt", c0."UserId", u."Id" AS "Id0", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
          FROM "ChatParticipants" AS c0
          INNER JOIN "Users" AS u ON c0."UserId" = u."Id"
      ) AS t ON c."Id" = t."ConversationId"
      WHERE c."Id" = ANY (@__convIds_0)
      ORDER BY c."LastMessageAt" DESC, c."Id", t."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "ChatMessages" AS c
      INNER JOIN "Users" AS u ON c."SenderId" = u."Id"
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0
      ORDER BY c."SentAt" DESC
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32), @__participant_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0 AND c."SentAt" > @__participant_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT u."Id", u."FullName", u."Email"
      FROM "Users" AS u
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT t."Id", t."Content", t."ConversationId", t."SenderId", t."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM (
          SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt"
          FROM "ChatMessages" AS c
          WHERE c."ConversationId" = @__conversationId_0
          ORDER BY c."SentAt" DESC
          LIMIT @__p_1
      ) AS t
      INNER JOIN "Users" AS u ON t."SenderId" = u."Id"
      ORDER BY t."SentAt" DESC
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."ConversationId", c."JoinedAt", c."LastReadAt", c."UserId"
      FROM "ChatParticipants" AS c
      WHERE c."ConversationId" = @__conversationId_0 AND c."UserId" = @__userId_1
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32), @p8='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
      UPDATE "ChatParticipants" SET "LastReadAt" = @p7
      WHERE "Id" = @p8;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."ConversationId", c."JoinedAt", c."LastReadAt", c."UserId"
      FROM "ChatParticipants" AS c
      WHERE c."ConversationId" = @__conversationId_0 AND c."UserId" = @__userId_1
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32), @p8='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
      UPDATE "ChatParticipants" SET "LastReadAt" = @p7
      WHERE "Id" = @p8;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name"
      FROM "ChatConversations" AS c
      WHERE c."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__senderId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."ConversationId", c."JoinedAt", c."LastReadAt", c."UserId"
      FROM "ChatParticipants" AS c
      WHERE c."ConversationId" = @__conversationId_0 AND c."UserId" = @__senderId_1
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32), @p7='?', @p8='?' (DbType = DateTime), @p9='?', @p10='?' (DbType = Int32), @p11='?', @p12='?', @p13='?' (DbType = Int32), @p15='?' (DbType = Int32), @p14='?' (DbType = DateTime), @p16='?', @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime), @p21='?' (DbType = Int32), @p20='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p7, @p8, @p9, @p10, @p11, @p12, @p13)
      RETURNING "Id";
      UPDATE "ChatConversations" SET "LastMessageAt" = @p14
      WHERE "Id" = @p15;
      INSERT INTO "ChatMessages" ("Content", "ConversationId", "SenderId", "SentAt")
      VALUES (@p16, @p17, @p18, @p19)
      RETURNING "Id";
      UPDATE "ChatParticipants" SET "LastReadAt" = @p20
      WHERE "Id" = @p21;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "Users" AS u
      WHERE u."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__convIds_0='?' (DbType = Object)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name", t."Id", t."ConversationId", t."JoinedAt", t."LastReadAt", t."UserId", t."Id0", t."Active", t."CreatedAt", t."Email", t."FullName", t."LastLoginAt", t."PasswordHash", t."Phone"
      FROM "ChatConversations" AS c
      LEFT JOIN (
          SELECT c0."Id", c0."ConversationId", c0."JoinedAt", c0."LastReadAt", c0."UserId", u."Id" AS "Id0", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
          FROM "ChatParticipants" AS c0
          INNER JOIN "Users" AS u ON c0."UserId" = u."Id"
      ) AS t ON c."Id" = t."ConversationId"
      WHERE c."Id" = ANY (@__convIds_0)
      ORDER BY c."LastMessageAt" DESC, c."Id", t."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "ChatMessages" AS c
      INNER JOIN "Users" AS u ON c."SenderId" = u."Id"
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0
      ORDER BY c."SentAt" DESC
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32), @__participant_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0 AND c."SentAt" > @__participant_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name"
      FROM "ChatConversations" AS c
      WHERE c."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__senderId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."ConversationId", c."JoinedAt", c."LastReadAt", c."UserId"
      FROM "ChatParticipants" AS c
      WHERE c."ConversationId" = @__conversationId_0 AND c."UserId" = @__senderId_1
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32), @p7='?', @p8='?' (DbType = DateTime), @p9='?', @p10='?' (DbType = Int32), @p11='?', @p12='?', @p13='?' (DbType = Int32), @p15='?' (DbType = Int32), @p14='?' (DbType = DateTime), @p16='?', @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime), @p21='?' (DbType = Int32), @p20='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p7, @p8, @p9, @p10, @p11, @p12, @p13)
      RETURNING "Id";
      UPDATE "ChatConversations" SET "LastMessageAt" = @p14
      WHERE "Id" = @p15;
      INSERT INTO "ChatMessages" ("Content", "ConversationId", "SenderId", "SentAt")
      VALUES (@p16, @p17, @p18, @p19)
      RETURNING "Id";
      UPDATE "ChatParticipants" SET "LastReadAt" = @p20
      WHERE "Id" = @p21;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "Users" AS u
      WHERE u."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__convIds_0='?' (DbType = Object)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name", t."Id", t."ConversationId", t."JoinedAt", t."LastReadAt", t."UserId", t."Id0", t."Active", t."CreatedAt", t."Email", t."FullName", t."LastLoginAt", t."PasswordHash", t."Phone"
      FROM "ChatConversations" AS c
      LEFT JOIN (
          SELECT c0."Id", c0."ConversationId", c0."JoinedAt", c0."LastReadAt", c0."UserId", u."Id" AS "Id0", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
          FROM "ChatParticipants" AS c0
          INNER JOIN "Users" AS u ON c0."UserId" = u."Id"
      ) AS t ON c."Id" = t."ConversationId"
      WHERE c."Id" = ANY (@__convIds_0)
      ORDER BY c."LastMessageAt" DESC, c."Id", t."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "ChatMessages" AS c
      INNER JOIN "Users" AS u ON c."SenderId" = u."Id"
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0
      ORDER BY c."SentAt" DESC
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32), @__participant_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0 AND c."SentAt" > @__participant_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__convIds_0='?' (DbType = Object)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name", t."Id", t."ConversationId", t."JoinedAt", t."LastReadAt", t."UserId", t."Id0", t."Active", t."CreatedAt", t."Email", t."FullName", t."LastLoginAt", t."PasswordHash", t."Phone"
      FROM "ChatConversations" AS c
      LEFT JOIN (
          SELECT c0."Id", c0."ConversationId", c0."JoinedAt", c0."LastReadAt", c0."UserId", u."Id" AS "Id0", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
          FROM "ChatParticipants" AS c0
          INNER JOIN "Users" AS u ON c0."UserId" = u."Id"
      ) AS t ON c."Id" = t."ConversationId"
      WHERE c."Id" = ANY (@__convIds_0)
      ORDER BY c."LastMessageAt" DESC, c."Id", t."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "ChatMessages" AS c
      INNER JOIN "Users" AS u ON c."SenderId" = u."Id"
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0
      ORDER BY c."SentAt" DESC
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32), @__participant_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0 AND c."SentAt" > @__participant_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT u."Id", u."FullName", u."Email"
      FROM "Users" AS u
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name"
      FROM "ChatConversations" AS c
      WHERE c."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__senderId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."ConversationId", c."JoinedAt", c."LastReadAt", c."UserId"
      FROM "ChatParticipants" AS c
      WHERE c."ConversationId" = @__conversationId_0 AND c."UserId" = @__senderId_1
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32), @p7='?', @p8='?' (DbType = DateTime), @p9='?', @p10='?' (DbType = Int32), @p11='?', @p12='?', @p13='?' (DbType = Int32), @p15='?' (DbType = Int32), @p14='?' (DbType = DateTime), @p16='?', @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime), @p21='?' (DbType = Int32), @p20='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p7, @p8, @p9, @p10, @p11, @p12, @p13)
      RETURNING "Id";
      UPDATE "ChatConversations" SET "LastMessageAt" = @p14
      WHERE "Id" = @p15;
      INSERT INTO "ChatMessages" ("Content", "ConversationId", "SenderId", "SentAt")
      VALUES (@p16, @p17, @p18, @p19)
      RETURNING "Id";
      UPDATE "ChatParticipants" SET "LastReadAt" = @p20
      WHERE "Id" = @p21;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "Users" AS u
      WHERE u."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__convIds_0='?' (DbType = Object)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name", t."Id", t."ConversationId", t."JoinedAt", t."LastReadAt", t."UserId", t."Id0", t."Active", t."CreatedAt", t."Email", t."FullName", t."LastLoginAt", t."PasswordHash", t."Phone"
      FROM "ChatConversations" AS c
      LEFT JOIN (
          SELECT c0."Id", c0."ConversationId", c0."JoinedAt", c0."LastReadAt", c0."UserId", u."Id" AS "Id0", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
          FROM "ChatParticipants" AS c0
          INNER JOIN "Users" AS u ON c0."UserId" = u."Id"
      ) AS t ON c."Id" = t."ConversationId"
      WHERE c."Id" = ANY (@__convIds_0)
      ORDER BY c."LastMessageAt" DESC, c."Id", t."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "ChatMessages" AS c
      INNER JOIN "Users" AS u ON c."SenderId" = u."Id"
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0
      ORDER BY c."SentAt" DESC
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32), @__participant_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0 AND c."SentAt" > @__participant_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT t."Id", t."Content", t."ConversationId", t."SenderId", t."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM (
          SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt"
          FROM "ChatMessages" AS c
          WHERE c."ConversationId" = @__conversationId_0
          ORDER BY c."SentAt" DESC
          LIMIT @__p_1
      ) AS t
      INNER JOIN "Users" AS u ON t."SenderId" = u."Id"
      ORDER BY t."SentAt" DESC
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."ConversationId", c."JoinedAt", c."LastReadAt", c."UserId"
      FROM "ChatParticipants" AS c
      WHERE c."ConversationId" = @__conversationId_0 AND c."UserId" = @__userId_1
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32), @p8='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
      UPDATE "ChatParticipants" SET "LastReadAt" = @p7
      WHERE "Id" = @p8;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."ConversationId", c."JoinedAt", c."LastReadAt", c."UserId"
      FROM "ChatParticipants" AS c
      WHERE c."ConversationId" = @__conversationId_0 AND c."UserId" = @__userId_1
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32), @p8='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
      UPDATE "ChatParticipants" SET "LastReadAt" = @p7
      WHERE "Id" = @p8;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT t."Id", t."Content", t."ConversationId", t."SenderId", t."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM (
          SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt"
          FROM "ChatMessages" AS c
          WHERE c."ConversationId" = @__conversationId_0
          ORDER BY c."SentAt" DESC
          LIMIT @__p_1
      ) AS t
      INNER JOIN "Users" AS u ON t."SenderId" = u."Id"
      ORDER BY t."SentAt" DESC
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."ConversationId", c."JoinedAt", c."LastReadAt", c."UserId"
      FROM "ChatParticipants" AS c
      WHERE c."ConversationId" = @__conversationId_0 AND c."UserId" = @__userId_1
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32), @p8='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
      UPDATE "ChatParticipants" SET "LastReadAt" = @p7
      WHERE "Id" = @p8;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."ConversationId", c."JoinedAt", c."LastReadAt", c."UserId"
      FROM "ChatParticipants" AS c
      WHERE c."ConversationId" = @__conversationId_0 AND c."UserId" = @__userId_1
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32), @p8='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
      UPDATE "ChatParticipants" SET "LastReadAt" = @p7
      WHERE "Id" = @p8;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name"
      FROM "ChatConversations" AS c
      WHERE c."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__senderId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."ConversationId", c."JoinedAt", c."LastReadAt", c."UserId"
      FROM "ChatParticipants" AS c
      WHERE c."ConversationId" = @__conversationId_0 AND c."UserId" = @__senderId_1
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32), @p7='?', @p8='?' (DbType = DateTime), @p9='?', @p10='?' (DbType = Int32), @p11='?', @p12='?', @p13='?' (DbType = Int32), @p15='?' (DbType = Int32), @p14='?' (DbType = DateTime), @p16='?', @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime), @p21='?' (DbType = Int32), @p20='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p7, @p8, @p9, @p10, @p11, @p12, @p13)
      RETURNING "Id";
      UPDATE "ChatConversations" SET "LastMessageAt" = @p14
      WHERE "Id" = @p15;
      INSERT INTO "ChatMessages" ("Content", "ConversationId", "SenderId", "SentAt")
      VALUES (@p16, @p17, @p18, @p19)
      RETURNING "Id";
      UPDATE "ChatParticipants" SET "LastReadAt" = @p20
      WHERE "Id" = @p21;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "Users" AS u
      WHERE u."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__convIds_0='?' (DbType = Object)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name", t."Id", t."ConversationId", t."JoinedAt", t."LastReadAt", t."UserId", t."Id0", t."Active", t."CreatedAt", t."Email", t."FullName", t."LastLoginAt", t."PasswordHash", t."Phone"
      FROM "ChatConversations" AS c
      LEFT JOIN (
          SELECT c0."Id", c0."ConversationId", c0."JoinedAt", c0."LastReadAt", c0."UserId", u."Id" AS "Id0", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
          FROM "ChatParticipants" AS c0
          INNER JOIN "Users" AS u ON c0."UserId" = u."Id"
      ) AS t ON c."Id" = t."ConversationId"
      WHERE c."Id" = ANY (@__convIds_0)
      ORDER BY c."LastMessageAt" DESC, c."Id", t."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "ChatMessages" AS c
      INNER JOIN "Users" AS u ON c."SenderId" = u."Id"
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0
      ORDER BY c."SentAt" DESC
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32), @__participant_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0 AND c."SentAt" > @__participant_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__convIds_0='?' (DbType = Object)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name", t."Id", t."ConversationId", t."JoinedAt", t."LastReadAt", t."UserId", t."Id0", t."Active", t."CreatedAt", t."Email", t."FullName", t."LastLoginAt", t."PasswordHash", t."Phone"
      FROM "ChatConversations" AS c
      LEFT JOIN (
          SELECT c0."Id", c0."ConversationId", c0."JoinedAt", c0."LastReadAt", c0."UserId", u."Id" AS "Id0", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
          FROM "ChatParticipants" AS c0
          INNER JOIN "Users" AS u ON c0."UserId" = u."Id"
      ) AS t ON c."Id" = t."ConversationId"
      WHERE c."Id" = ANY (@__convIds_0)
      ORDER BY c."LastMessageAt" DESC, c."Id", t."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "ChatMessages" AS c
      INNER JOIN "Users" AS u ON c."SenderId" = u."Id"
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0
      ORDER BY c."SentAt" DESC
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32), @__participant_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0 AND c."SentAt" > @__participant_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT u."Id", u."FullName", u."Email"
      FROM "Users" AS u
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT t."Id", t."Content", t."ConversationId", t."SenderId", t."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM (
          SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt"
          FROM "ChatMessages" AS c
          WHERE c."ConversationId" = @__conversationId_0
          ORDER BY c."SentAt" DESC
          LIMIT @__p_1
      ) AS t
      INNER JOIN "Users" AS u ON t."SenderId" = u."Id"
      ORDER BY t."SentAt" DESC
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."ConversationId", c."JoinedAt", c."LastReadAt", c."UserId"
      FROM "ChatParticipants" AS c
      WHERE c."ConversationId" = @__conversationId_0 AND c."UserId" = @__userId_1
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32), @p8='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
      UPDATE "ChatParticipants" SET "LastReadAt" = @p7
      WHERE "Id" = @p8;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."ConversationId", c."JoinedAt", c."LastReadAt", c."UserId"
      FROM "ChatParticipants" AS c
      WHERE c."ConversationId" = @__conversationId_0 AND c."UserId" = @__userId_1
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32), @p8='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
      UPDATE "ChatParticipants" SET "LastReadAt" = @p7
      WHERE "Id" = @p8;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name"
      FROM "ChatConversations" AS c
      WHERE c."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__senderId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."ConversationId", c."JoinedAt", c."LastReadAt", c."UserId"
      FROM "ChatParticipants" AS c
      WHERE c."ConversationId" = @__conversationId_0 AND c."UserId" = @__senderId_1
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32), @p7='?', @p8='?' (DbType = DateTime), @p9='?', @p10='?' (DbType = Int32), @p11='?', @p12='?', @p13='?' (DbType = Int32), @p15='?' (DbType = Int32), @p14='?' (DbType = DateTime), @p16='?', @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime), @p21='?' (DbType = Int32), @p20='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p7, @p8, @p9, @p10, @p11, @p12, @p13)
      RETURNING "Id";
      UPDATE "ChatConversations" SET "LastMessageAt" = @p14
      WHERE "Id" = @p15;
      INSERT INTO "ChatMessages" ("Content", "ConversationId", "SenderId", "SentAt")
      VALUES (@p16, @p17, @p18, @p19)
      RETURNING "Id";
      UPDATE "ChatParticipants" SET "LastReadAt" = @p20
      WHERE "Id" = @p21;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "Users" AS u
      WHERE u."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__convIds_0='?' (DbType = Object)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name", t."Id", t."ConversationId", t."JoinedAt", t."LastReadAt", t."UserId", t."Id0", t."Active", t."CreatedAt", t."Email", t."FullName", t."LastLoginAt", t."PasswordHash", t."Phone"
      FROM "ChatConversations" AS c
      LEFT JOIN (
          SELECT c0."Id", c0."ConversationId", c0."JoinedAt", c0."LastReadAt", c0."UserId", u."Id" AS "Id0", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
          FROM "ChatParticipants" AS c0
          INNER JOIN "Users" AS u ON c0."UserId" = u."Id"
      ) AS t ON c."Id" = t."ConversationId"
      WHERE c."Id" = ANY (@__convIds_0)
      ORDER BY c."LastMessageAt" DESC, c."Id", t."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "ChatMessages" AS c
      INNER JOIN "Users" AS u ON c."SenderId" = u."Id"
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0
      ORDER BY c."SentAt" DESC
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32), @__participant_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0 AND c."SentAt" > @__participant_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__convIds_0='?' (DbType = Object)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name", t."Id", t."ConversationId", t."JoinedAt", t."LastReadAt", t."UserId", t."Id0", t."Active", t."CreatedAt", t."Email", t."FullName", t."LastLoginAt", t."PasswordHash", t."Phone"
      FROM "ChatConversations" AS c
      LEFT JOIN (
          SELECT c0."Id", c0."ConversationId", c0."JoinedAt", c0."LastReadAt", c0."UserId", u."Id" AS "Id0", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
          FROM "ChatParticipants" AS c0
          INNER JOIN "Users" AS u ON c0."UserId" = u."Id"
      ) AS t ON c."Id" = t."ConversationId"
      WHERE c."Id" = ANY (@__convIds_0)
      ORDER BY c."LastMessageAt" DESC, c."Id", t."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "ChatMessages" AS c
      INNER JOIN "Users" AS u ON c."SenderId" = u."Id"
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0
      ORDER BY c."SentAt" DESC
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32), @__participant_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0 AND c."SentAt" > @__participant_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT u."Id", u."FullName", u."Email"
      FROM "Users" AS u
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT t."Id", t."Content", t."ConversationId", t."SenderId", t."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM (
          SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt"
          FROM "ChatMessages" AS c
          WHERE c."ConversationId" = @__conversationId_0
          ORDER BY c."SentAt" DESC
          LIMIT @__p_1
      ) AS t
      INNER JOIN "Users" AS u ON t."SenderId" = u."Id"
      ORDER BY t."SentAt" DESC
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."ConversationId", c."JoinedAt", c."LastReadAt", c."UserId"
      FROM "ChatParticipants" AS c
      WHERE c."ConversationId" = @__conversationId_0 AND c."UserId" = @__userId_1
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32), @p8='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
      UPDATE "ChatParticipants" SET "LastReadAt" = @p7
      WHERE "Id" = @p8;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."ConversationId", c."JoinedAt", c."LastReadAt", c."UserId"
      FROM "ChatParticipants" AS c
      WHERE c."ConversationId" = @__conversationId_0 AND c."UserId" = @__userId_1
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32), @p8='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
      UPDATE "ChatParticipants" SET "LastReadAt" = @p7
      WHERE "Id" = @p8;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name"
      FROM "ChatConversations" AS c
      WHERE c."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__senderId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."ConversationId", c."JoinedAt", c."LastReadAt", c."UserId"
      FROM "ChatParticipants" AS c
      WHERE c."ConversationId" = @__conversationId_0 AND c."UserId" = @__senderId_1
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32), @p7='?', @p8='?' (DbType = DateTime), @p9='?', @p10='?' (DbType = Int32), @p11='?', @p12='?', @p13='?' (DbType = Int32), @p15='?' (DbType = Int32), @p14='?' (DbType = DateTime), @p16='?', @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime), @p21='?' (DbType = Int32), @p20='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p7, @p8, @p9, @p10, @p11, @p12, @p13)
      RETURNING "Id";
      UPDATE "ChatConversations" SET "LastMessageAt" = @p14
      WHERE "Id" = @p15;
      INSERT INTO "ChatMessages" ("Content", "ConversationId", "SenderId", "SentAt")
      VALUES (@p16, @p17, @p18, @p19)
      RETURNING "Id";
      UPDATE "ChatParticipants" SET "LastReadAt" = @p20
      WHERE "Id" = @p21;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "Users" AS u
      WHERE u."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__convIds_0='?' (DbType = Object)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name", t."Id", t."ConversationId", t."JoinedAt", t."LastReadAt", t."UserId", t."Id0", t."Active", t."CreatedAt", t."Email", t."FullName", t."LastLoginAt", t."PasswordHash", t."Phone"
      FROM "ChatConversations" AS c
      LEFT JOIN (
          SELECT c0."Id", c0."ConversationId", c0."JoinedAt", c0."LastReadAt", c0."UserId", u."Id" AS "Id0", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
          FROM "ChatParticipants" AS c0
          INNER JOIN "Users" AS u ON c0."UserId" = u."Id"
      ) AS t ON c."Id" = t."ConversationId"
      WHERE c."Id" = ANY (@__convIds_0)
      ORDER BY c."LastMessageAt" DESC, c."Id", t."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "ChatMessages" AS c
      INNER JOIN "Users" AS u ON c."SenderId" = u."Id"
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0
      ORDER BY c."SentAt" DESC
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32), @__participant_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0 AND c."SentAt" > @__participant_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__convIds_0='?' (DbType = Object)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name", t."Id", t."ConversationId", t."JoinedAt", t."LastReadAt", t."UserId", t."Id0", t."Active", t."CreatedAt", t."Email", t."FullName", t."LastLoginAt", t."PasswordHash", t."Phone"
      FROM "ChatConversations" AS c
      LEFT JOIN (
          SELECT c0."Id", c0."ConversationId", c0."JoinedAt", c0."LastReadAt", c0."UserId", u."Id" AS "Id0", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
          FROM "ChatParticipants" AS c0
          INNER JOIN "Users" AS u ON c0."UserId" = u."Id"
      ) AS t ON c."Id" = t."ConversationId"
      WHERE c."Id" = ANY (@__convIds_0)
      ORDER BY c."LastMessageAt" DESC, c."Id", t."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "ChatMessages" AS c
      INNER JOIN "Users" AS u ON c."SenderId" = u."Id"
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0
      ORDER BY c."SentAt" DESC
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32), @__participant_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0 AND c."SentAt" > @__participant_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT u."Id", u."FullName", u."Email"
      FROM "Users" AS u
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT t."Id", t."Content", t."ConversationId", t."SenderId", t."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM (
          SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt"
          FROM "ChatMessages" AS c
          WHERE c."ConversationId" = @__conversationId_0
          ORDER BY c."SentAt" DESC
          LIMIT @__p_1
      ) AS t
      INNER JOIN "Users" AS u ON t."SenderId" = u."Id"
      ORDER BY t."SentAt" DESC
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."ConversationId", c."JoinedAt", c."LastReadAt", c."UserId"
      FROM "ChatParticipants" AS c
      WHERE c."ConversationId" = @__conversationId_0 AND c."UserId" = @__userId_1
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32), @p8='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
      UPDATE "ChatParticipants" SET "LastReadAt" = @p7
      WHERE "Id" = @p8;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."ConversationId", c."JoinedAt", c."LastReadAt", c."UserId"
      FROM "ChatParticipants" AS c
      WHERE c."ConversationId" = @__conversationId_0 AND c."UserId" = @__userId_1
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32), @p8='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
      UPDATE "ChatParticipants" SET "LastReadAt" = @p7
      WHERE "Id" = @p8;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name"
      FROM "ChatConversations" AS c
      WHERE c."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__senderId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."ConversationId", c."JoinedAt", c."LastReadAt", c."UserId"
      FROM "ChatParticipants" AS c
      WHERE c."ConversationId" = @__conversationId_0 AND c."UserId" = @__senderId_1
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32), @p7='?', @p8='?' (DbType = DateTime), @p9='?', @p10='?' (DbType = Int32), @p11='?', @p12='?', @p13='?' (DbType = Int32), @p15='?' (DbType = Int32), @p14='?' (DbType = DateTime), @p16='?', @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime), @p21='?' (DbType = Int32), @p20='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p7, @p8, @p9, @p10, @p11, @p12, @p13)
      RETURNING "Id";
      UPDATE "ChatConversations" SET "LastMessageAt" = @p14
      WHERE "Id" = @p15;
      INSERT INTO "ChatMessages" ("Content", "ConversationId", "SenderId", "SentAt")
      VALUES (@p16, @p17, @p18, @p19)
      RETURNING "Id";
      UPDATE "ChatParticipants" SET "LastReadAt" = @p20
      WHERE "Id" = @p21;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "Users" AS u
      WHERE u."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__convIds_0='?' (DbType = Object)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name", t."Id", t."ConversationId", t."JoinedAt", t."LastReadAt", t."UserId", t."Id0", t."Active", t."CreatedAt", t."Email", t."FullName", t."LastLoginAt", t."PasswordHash", t."Phone"
      FROM "ChatConversations" AS c
      LEFT JOIN (
          SELECT c0."Id", c0."ConversationId", c0."JoinedAt", c0."LastReadAt", c0."UserId", u."Id" AS "Id0", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
          FROM "ChatParticipants" AS c0
          INNER JOIN "Users" AS u ON c0."UserId" = u."Id"
      ) AS t ON c."Id" = t."ConversationId"
      WHERE c."Id" = ANY (@__convIds_0)
      ORDER BY c."LastMessageAt" DESC, c."Id", t."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "ChatMessages" AS c
      INNER JOIN "Users" AS u ON c."SenderId" = u."Id"
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0
      ORDER BY c."SentAt" DESC
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32), @__participant_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0 AND c."SentAt" > @__participant_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@__convIds_0='?' (DbType = Object)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name", t."Id", t."ConversationId", t."JoinedAt", t."LastReadAt", t."UserId", t."Id0", t."Active", t."CreatedAt", t."Email", t."FullName", t."LastLoginAt", t."PasswordHash", t."Phone"
      FROM "ChatConversations" AS c
      LEFT JOIN (
          SELECT c0."Id", c0."ConversationId", c0."JoinedAt", c0."LastReadAt", c0."UserId", u."Id" AS "Id0", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
          FROM "ChatParticipants" AS c0
          INNER JOIN "Users" AS u ON c0."UserId" = u."Id"
      ) AS t ON c."Id" = t."ConversationId"
      WHERE c."Id" = ANY (@__convIds_0)
      ORDER BY c."LastMessageAt" DESC, c."Id", t."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "ChatMessages" AS c
      INNER JOIN "Users" AS u ON c."SenderId" = u."Id"
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0
      ORDER BY c."SentAt" DESC
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32), @__participant_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0 AND c."SentAt" > @__participant_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT u."Id", u."FullName", u."Email"
      FROM "Users" AS u
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT t."Id", t."Content", t."ConversationId", t."SenderId", t."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM (
          SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt"
          FROM "ChatMessages" AS c
          WHERE c."ConversationId" = @__conversationId_0
          ORDER BY c."SentAt" DESC
          LIMIT @__p_1
      ) AS t
      INNER JOIN "Users" AS u ON t."SenderId" = u."Id"
      ORDER BY t."SentAt" DESC
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."ConversationId", c."JoinedAt", c."LastReadAt", c."UserId"
      FROM "ChatParticipants" AS c
      WHERE c."ConversationId" = @__conversationId_0 AND c."UserId" = @__userId_1
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32), @p8='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
      UPDATE "ChatParticipants" SET "LastReadAt" = @p7
      WHERE "Id" = @p8;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."ConversationId", c."JoinedAt", c."LastReadAt", c."UserId"
      FROM "ChatParticipants" AS c
      WHERE c."ConversationId" = @__conversationId_0 AND c."UserId" = @__userId_1
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32), @p8='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
      UPDATE "ChatParticipants" SET "LastReadAt" = @p7
      WHERE "Id" = @p8;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT t."Id", t."Content", t."ConversationId", t."SenderId", t."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM (
          SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt"
          FROM "ChatMessages" AS c
          WHERE c."ConversationId" = @__conversationId_0
          ORDER BY c."SentAt" DESC
          LIMIT @__p_1
      ) AS t
      INNER JOIN "Users" AS u ON t."SenderId" = u."Id"
      ORDER BY t."SentAt" DESC
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."ConversationId", c."JoinedAt", c."LastReadAt", c."UserId"
      FROM "ChatParticipants" AS c
      WHERE c."ConversationId" = @__conversationId_0 AND c."UserId" = @__userId_1
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32), @p8='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
      UPDATE "ChatParticipants" SET "LastReadAt" = @p7
      WHERE "Id" = @p8;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."ConversationId", c."JoinedAt", c."LastReadAt", c."UserId"
      FROM "ChatParticipants" AS c
      WHERE c."ConversationId" = @__conversationId_0 AND c."UserId" = @__userId_1
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32), @p8='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
      UPDATE "ChatParticipants" SET "LastReadAt" = @p7
      WHERE "Id" = @p8;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__convIds_0='?' (DbType = Object)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name", t."Id", t."ConversationId", t."JoinedAt", t."LastReadAt", t."UserId", t."Id0", t."Active", t."CreatedAt", t."Email", t."FullName", t."LastLoginAt", t."PasswordHash", t."Phone"
      FROM "ChatConversations" AS c
      LEFT JOIN (
          SELECT c0."Id", c0."ConversationId", c0."JoinedAt", c0."LastReadAt", c0."UserId", u."Id" AS "Id0", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
          FROM "ChatParticipants" AS c0
          INNER JOIN "Users" AS u ON c0."UserId" = u."Id"
      ) AS t ON c."Id" = t."ConversationId"
      WHERE c."Id" = ANY (@__convIds_0)
      ORDER BY c."LastMessageAt" DESC, c."Id", t."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "ChatMessages" AS c
      INNER JOIN "Users" AS u ON c."SenderId" = u."Id"
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0
      ORDER BY c."SentAt" DESC
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32), @__participant_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0 AND c."SentAt" > @__participant_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT u."Id", u."FullName", u."Email"
      FROM "Users" AS u
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT t."Id", t."Content", t."ConversationId", t."SenderId", t."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM (
          SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt"
          FROM "ChatMessages" AS c
          WHERE c."ConversationId" = @__conversationId_0
          ORDER BY c."SentAt" DESC
          LIMIT @__p_1
      ) AS t
      INNER JOIN "Users" AS u ON t."SenderId" = u."Id"
      ORDER BY t."SentAt" DESC
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."ConversationId", c."JoinedAt", c."LastReadAt", c."UserId"
      FROM "ChatParticipants" AS c
      WHERE c."ConversationId" = @__conversationId_0 AND c."UserId" = @__userId_1
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32), @p8='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
      UPDATE "ChatParticipants" SET "LastReadAt" = @p7
      WHERE "Id" = @p8;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."ConversationId", c."JoinedAt", c."LastReadAt", c."UserId"
      FROM "ChatParticipants" AS c
      WHERE c."ConversationId" = @__conversationId_0 AND c."UserId" = @__userId_1
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32), @p8='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
      UPDATE "ChatParticipants" SET "LastReadAt" = @p7
      WHERE "Id" = @p8;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__convIds_0='?' (DbType = Object)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name", t."Id", t."ConversationId", t."JoinedAt", t."LastReadAt", t."UserId", t."Id0", t."Active", t."CreatedAt", t."Email", t."FullName", t."LastLoginAt", t."PasswordHash", t."Phone"
      FROM "ChatConversations" AS c
      LEFT JOIN (
          SELECT c0."Id", c0."ConversationId", c0."JoinedAt", c0."LastReadAt", c0."UserId", u."Id" AS "Id0", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
          FROM "ChatParticipants" AS c0
          INNER JOIN "Users" AS u ON c0."UserId" = u."Id"
      ) AS t ON c."Id" = t."ConversationId"
      WHERE c."Id" = ANY (@__convIds_0)
      ORDER BY c."LastMessageAt" DESC, c."Id", t."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "ChatMessages" AS c
      INNER JOIN "Users" AS u ON c."SenderId" = u."Id"
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0
      ORDER BY c."SentAt" DESC
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32), @__participant_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0 AND c."SentAt" > @__participant_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Companies" AS c
      WHERE NOT (c."IsDeleted")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Projects" AS p
      WHERE NOT (p."IsDeleted")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Tasks" AS t
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Users" AS u
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Contacts" AS c
      WHERE NOT (c."IsDeleted")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__now_0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Tasks" AS t
      WHERE t."DueDate" < @__now_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COALESCE(sum(t."Hours"), 0.0)
      FROM "TimeEntries" AS t
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__monthStart_0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      SELECT COALESCE(sum(t."Hours"), 0.0)
      FROM "TimeEntries" AS t
      WHERE t."Date" >= @__monthStart_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT t3."ProjectId", t3."Name" AS "ProjectName", t3."Name0" AS "CompanyName", COALESCE(sum(t3."Hours"), 0.0) AS "TotalHours", t3."EstimatedHours0" AS "EstimatedHours"
      FROM (
          SELECT t."Hours", t0."ProjectId", t1."Name", t2."Name" AS "Name0", COALESCE(t1."EstimatedHours", 0.0) AS "EstimatedHours0"
          FROM "TimeEntries" AS t
          INNER JOIN "Tasks" AS t0 ON t."TaskId" = t0."Id"
          INNER JOIN (
              SELECT p."Id", p."CompanyId", p."EstimatedHours", p."Name"
              FROM "Projects" AS p
              WHERE NOT (p."IsDeleted")
          ) AS t1 ON t0."ProjectId" = t1."Id"
          INNER JOIN (
              SELECT c."Id", c."Name"
              FROM "Companies" AS c
              WHERE NOT (c."IsDeleted")
          ) AS t2 ON t1."CompanyId" = t2."Id"
      ) AS t3
      GROUP BY t3."ProjectId", t3."Name", t3."Name0", t3."EstimatedHours0"
      ORDER BY COALESCE(sum(t3."Hours"), 0.0) DESC
      LIMIT @__p_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@__monthStart_0='?' (DbType = DateTime), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT t."UserId", u."FullName" AS "UserName", COALESCE(sum(t."Hours"), 0.0) AS "TotalHours", COALESCE(sum(t."Hours") FILTER (WHERE t."Date" >= @__monthStart_0), 0.0) AS "HoursThisMonth"
      FROM "TimeEntries" AS t
      INNER JOIN "Users" AS u ON t."UserId" = u."Id"
      GROUP BY t."UserId", u."FullName"
      ORDER BY COALESCE(sum(t."Hours"), 0.0) DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT p."Status", count(*)::int
      FROM "Projects" AS p
      WHERE NOT (p."IsDeleted")
      GROUP BY p."Status"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT t."Priority", count(*)::int
      FROM "Tasks" AS t
      GROUP BY t."Priority"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@__now_0='?' (DbType = DateTime), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT p."Id", p."Name", p."Status", (
          SELECT count(*)::int
          FROM "Tasks" AS t2
          WHERE p."Id" = t2."ProjectId"), (
          SELECT count(*)::int
          FROM "Tasks" AS t3
          LEFT JOIN "BoardColumns" AS b ON t3."ColumnId" = b."Id"
          WHERE p."Id" = t3."ProjectId" AND b."Id" IS NOT NULL AND (b."SortOrder" = (
              SELECT max(b0."SortOrder")
              FROM "BoardColumns" AS b0
              WHERE b0."ProjectId" = p."Id") OR (b."SortOrder" IS NULL AND (
              SELECT max(b0."SortOrder")
              FROM "BoardColumns" AS b0
              WHERE b0."ProjectId" = p."Id") IS NULL))), (
          SELECT count(*)::int
          FROM "Tasks" AS t4
          WHERE p."Id" = t4."ProjectId" AND t4."DueDate" IS NOT NULL AND t4."DueDate" < @__now_0), COALESCE(p."EstimatedHours", 0.0), (
          SELECT COALESCE(sum(t6."Hours"), 0.0)
          FROM "Tasks" AS t5
          INNER JOIN "TimeEntries" AS t6 ON t5."Id" = t6."TaskId"
          WHERE p."Id" = t5."ProjectId"), CASE
          WHEN COALESCE(p."EstimatedHours", 0.0) > 0.0 THEN round(((
              SELECT COALESCE(sum(t8."Hours"), 0.0)
              FROM "Tasks" AS t7
              INNER JOIN "TimeEntries" AS t8 ON t7."Id" = t8."TaskId"
              WHERE p."Id" = t7."ProjectId") / COALESCE(p."EstimatedHours", 1.0)) * 100.0, 1)
          ELSE 0.0
      END
      FROM "Projects" AS p
      WHERE NOT (p."IsDeleted") AND (
          SELECT count(*)::int
          FROM "Tasks" AS t
          WHERE p."Id" = t."ProjectId") > 0
      ORDER BY CASE
          WHEN COALESCE(p."EstimatedHours", 0.0) > 0.0 THEN round(((
              SELECT COALESCE(sum(t1."Hours"), 0.0)
              FROM "Tasks" AS t0
              INNER JOIN "TimeEntries" AS t1 ON t0."Id" = t1."TaskId"
              WHERE p."Id" = t0."ProjectId") / COALESCE(p."EstimatedHours", 1.0)) * 100.0, 1)
          ELSE 0.0
      END DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT t."Id", t."Type", t."Description", u."FullName" AS "UserName", CASE
          WHEN t0."Id" IS NOT NULL THEN t0."Name"
          WHEN t1."Id" IS NOT NULL THEN t1."FullName"
          WHEN t2."Id" IS NOT NULL THEN t2."Name"
          ELSE NULL
      END AS "EntityName", t."CreatedAt"
      FROM (
          SELECT a."Id", a."CompanyId", a."ContactId", a."CreatedAt", a."Description", a."ProjectId", a."Type", a."UserId"
          FROM "ActivityLogs" AS a
          ORDER BY a."CreatedAt" DESC
          LIMIT @__p_0
      ) AS t
      INNER JOIN "Users" AS u ON t."UserId" = u."Id"
      LEFT JOIN (
          SELECT c."Id", c."Name"
          FROM "Companies" AS c
          WHERE NOT (c."IsDeleted")
      ) AS t0 ON t."CompanyId" = t0."Id"
      LEFT JOIN (
          SELECT c0."Id", c0."FullName"
          FROM "Contacts" AS c0
          WHERE NOT (c0."IsDeleted")
      ) AS t1 ON t."ContactId" = t1."Id"
      LEFT JOIN (
          SELECT p."Id", p."Name"
          FROM "Projects" AS p
          WHERE NOT (p."IsDeleted")
      ) AS t2 ON t."ProjectId" = t2."Id"
      ORDER BY t."CreatedAt" DESC
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Deals" AS d
      WHERE NOT (d."IsDeleted")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COALESCE(sum(COALESCE(d."Value", 0.0)), 0.0)
      FROM "Deals" AS d
      WHERE NOT (d."IsDeleted") AND d."Stage" <> 'ClosedLost'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT d."Stage", count(*)::int, COALESCE(sum(COALESCE(d."Value", 0.0)), 0.0)
      FROM "Deals" AS d
      WHERE NOT (d."IsDeleted")
      GROUP BY d."Stage"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__now_0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Reminders" AS r
      WHERE NOT (r."IsCompleted") AND r."DueDate" < @__now_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Companies" AS c
      WHERE NOT (c."IsDeleted")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Projects" AS p
      WHERE NOT (p."IsDeleted")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Tasks" AS t
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Users" AS u
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Contacts" AS c
      WHERE NOT (c."IsDeleted")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__now_0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Tasks" AS t
      WHERE t."DueDate" < @__now_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COALESCE(sum(t."Hours"), 0.0)
      FROM "TimeEntries" AS t
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__monthStart_0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      SELECT COALESCE(sum(t."Hours"), 0.0)
      FROM "TimeEntries" AS t
      WHERE t."Date" >= @__monthStart_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT t3."ProjectId", t3."Name" AS "ProjectName", t3."Name0" AS "CompanyName", COALESCE(sum(t3."Hours"), 0.0) AS "TotalHours", t3."EstimatedHours0" AS "EstimatedHours"
      FROM (
          SELECT t."Hours", t0."ProjectId", t1."Name", t2."Name" AS "Name0", COALESCE(t1."EstimatedHours", 0.0) AS "EstimatedHours0"
          FROM "TimeEntries" AS t
          INNER JOIN "Tasks" AS t0 ON t."TaskId" = t0."Id"
          INNER JOIN (
              SELECT p."Id", p."CompanyId", p."EstimatedHours", p."Name"
              FROM "Projects" AS p
              WHERE NOT (p."IsDeleted")
          ) AS t1 ON t0."ProjectId" = t1."Id"
          INNER JOIN (
              SELECT c."Id", c."Name"
              FROM "Companies" AS c
              WHERE NOT (c."IsDeleted")
          ) AS t2 ON t1."CompanyId" = t2."Id"
      ) AS t3
      GROUP BY t3."ProjectId", t3."Name", t3."Name0", t3."EstimatedHours0"
      ORDER BY COALESCE(sum(t3."Hours"), 0.0) DESC
      LIMIT @__p_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__monthStart_0='?' (DbType = DateTime), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT t."UserId", u."FullName" AS "UserName", COALESCE(sum(t."Hours"), 0.0) AS "TotalHours", COALESCE(sum(t."Hours") FILTER (WHERE t."Date" >= @__monthStart_0), 0.0) AS "HoursThisMonth"
      FROM "TimeEntries" AS t
      INNER JOIN "Users" AS u ON t."UserId" = u."Id"
      GROUP BY t."UserId", u."FullName"
      ORDER BY COALESCE(sum(t."Hours"), 0.0) DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT p."Status", count(*)::int
      FROM "Projects" AS p
      WHERE NOT (p."IsDeleted")
      GROUP BY p."Status"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT t."Priority", count(*)::int
      FROM "Tasks" AS t
      GROUP BY t."Priority"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@__now_0='?' (DbType = DateTime), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT p."Id", p."Name", p."Status", (
          SELECT count(*)::int
          FROM "Tasks" AS t2
          WHERE p."Id" = t2."ProjectId"), (
          SELECT count(*)::int
          FROM "Tasks" AS t3
          LEFT JOIN "BoardColumns" AS b ON t3."ColumnId" = b."Id"
          WHERE p."Id" = t3."ProjectId" AND b."Id" IS NOT NULL AND (b."SortOrder" = (
              SELECT max(b0."SortOrder")
              FROM "BoardColumns" AS b0
              WHERE b0."ProjectId" = p."Id") OR (b."SortOrder" IS NULL AND (
              SELECT max(b0."SortOrder")
              FROM "BoardColumns" AS b0
              WHERE b0."ProjectId" = p."Id") IS NULL))), (
          SELECT count(*)::int
          FROM "Tasks" AS t4
          WHERE p."Id" = t4."ProjectId" AND t4."DueDate" IS NOT NULL AND t4."DueDate" < @__now_0), COALESCE(p."EstimatedHours", 0.0), (
          SELECT COALESCE(sum(t6."Hours"), 0.0)
          FROM "Tasks" AS t5
          INNER JOIN "TimeEntries" AS t6 ON t5."Id" = t6."TaskId"
          WHERE p."Id" = t5."ProjectId"), CASE
          WHEN COALESCE(p."EstimatedHours", 0.0) > 0.0 THEN round(((
              SELECT COALESCE(sum(t8."Hours"), 0.0)
              FROM "Tasks" AS t7
              INNER JOIN "TimeEntries" AS t8 ON t7."Id" = t8."TaskId"
              WHERE p."Id" = t7."ProjectId") / COALESCE(p."EstimatedHours", 1.0)) * 100.0, 1)
          ELSE 0.0
      END
      FROM "Projects" AS p
      WHERE NOT (p."IsDeleted") AND (
          SELECT count(*)::int
          FROM "Tasks" AS t
          WHERE p."Id" = t."ProjectId") > 0
      ORDER BY CASE
          WHEN COALESCE(p."EstimatedHours", 0.0) > 0.0 THEN round(((
              SELECT COALESCE(sum(t1."Hours"), 0.0)
              FROM "Tasks" AS t0
              INNER JOIN "TimeEntries" AS t1 ON t0."Id" = t1."TaskId"
              WHERE p."Id" = t0."ProjectId") / COALESCE(p."EstimatedHours", 1.0)) * 100.0, 1)
          ELSE 0.0
      END DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT t."Id", t."Type", t."Description", u."FullName" AS "UserName", CASE
          WHEN t0."Id" IS NOT NULL THEN t0."Name"
          WHEN t1."Id" IS NOT NULL THEN t1."FullName"
          WHEN t2."Id" IS NOT NULL THEN t2."Name"
          ELSE NULL
      END AS "EntityName", t."CreatedAt"
      FROM (
          SELECT a."Id", a."CompanyId", a."ContactId", a."CreatedAt", a."Description", a."ProjectId", a."Type", a."UserId"
          FROM "ActivityLogs" AS a
          ORDER BY a."CreatedAt" DESC
          LIMIT @__p_0
      ) AS t
      INNER JOIN "Users" AS u ON t."UserId" = u."Id"
      LEFT JOIN (
          SELECT c."Id", c."Name"
          FROM "Companies" AS c
          WHERE NOT (c."IsDeleted")
      ) AS t0 ON t."CompanyId" = t0."Id"
      LEFT JOIN (
          SELECT c0."Id", c0."FullName"
          FROM "Contacts" AS c0
          WHERE NOT (c0."IsDeleted")
      ) AS t1 ON t."ContactId" = t1."Id"
      LEFT JOIN (
          SELECT p."Id", p."Name"
          FROM "Projects" AS p
          WHERE NOT (p."IsDeleted")
      ) AS t2 ON t."ProjectId" = t2."Id"
      ORDER BY t."CreatedAt" DESC
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Deals" AS d
      WHERE NOT (d."IsDeleted")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COALESCE(sum(COALESCE(d."Value", 0.0)), 0.0)
      FROM "Deals" AS d
      WHERE NOT (d."IsDeleted") AND d."Stage" <> 'ClosedLost'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT d."Stage", count(*)::int, COALESCE(sum(COALESCE(d."Value", 0.0)), 0.0)
      FROM "Deals" AS d
      WHERE NOT (d."IsDeleted")
      GROUP BY d."Stage"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__now_0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Reminders" AS r
      WHERE NOT (r."IsCompleted") AND r."DueDate" < @__now_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@__convIds_0='?' (DbType = Object)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name", t."Id", t."ConversationId", t."JoinedAt", t."LastReadAt", t."UserId", t."Id0", t."Active", t."CreatedAt", t."Email", t."FullName", t."LastLoginAt", t."PasswordHash", t."Phone"
      FROM "ChatConversations" AS c
      LEFT JOIN (
          SELECT c0."Id", c0."ConversationId", c0."JoinedAt", c0."LastReadAt", c0."UserId", u."Id" AS "Id0", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
          FROM "ChatParticipants" AS c0
          INNER JOIN "Users" AS u ON c0."UserId" = u."Id"
      ) AS t ON c."Id" = t."ConversationId"
      WHERE c."Id" = ANY (@__convIds_0)
      ORDER BY c."LastMessageAt" DESC, c."Id", t."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "ChatMessages" AS c
      INNER JOIN "Users" AS u ON c."SenderId" = u."Id"
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0
      ORDER BY c."SentAt" DESC
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32), @__participant_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0 AND c."SentAt" > @__participant_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT u."Id", u."FullName", u."Email"
      FROM "Users" AS u
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT t."Id", t."Content", t."ConversationId", t."SenderId", t."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM (
          SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt"
          FROM "ChatMessages" AS c
          WHERE c."ConversationId" = @__conversationId_0
          ORDER BY c."SentAt" DESC
          LIMIT @__p_1
      ) AS t
      INNER JOIN "Users" AS u ON t."SenderId" = u."Id"
      ORDER BY t."SentAt" DESC
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."ConversationId", c."JoinedAt", c."LastReadAt", c."UserId"
      FROM "ChatParticipants" AS c
      WHERE c."ConversationId" = @__conversationId_0 AND c."UserId" = @__userId_1
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32), @p8='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
      UPDATE "ChatParticipants" SET "LastReadAt" = @p7
      WHERE "Id" = @p8;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."ConversationId", c."JoinedAt", c."LastReadAt", c."UserId"
      FROM "ChatParticipants" AS c
      WHERE c."ConversationId" = @__conversationId_0 AND c."UserId" = @__userId_1
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (7ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32), @p8='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
      UPDATE "ChatParticipants" SET "LastReadAt" = @p7
      WHERE "Id" = @p8;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (3ms) [Parameters=[@__request_Email_0='?'], CommandType='Text', CommandTimeout='30']
      SELECT t."Id", t."Active", t."CreatedAt", t."Email", t."FullName", t."LastLoginAt", t."PasswordHash", t."Phone", t0."UserId", t0."RoleId", t0."Id", t0."Name"
      FROM (
          SELECT u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
          FROM "Users" AS u
          WHERE u."Email" = @__request_Email_0 AND u."Active"
          LIMIT 1
      ) AS t
      LEFT JOIN (
          SELECT u0."UserId", u0."RoleId", r."Id", r."Name"
          FROM "UserRoles" AS u0
          INNER JOIN "Roles" AS r ON u0."RoleId" = r."Id"
      ) AS t0 ON t."Id" = t0."UserId"
      ORDER BY t."Id", t0."UserId", t0."RoleId"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "Users" SET "LastLoginAt" = @p0
      WHERE "Id" = @p1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__convIds_0='?' (DbType = Object)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name", t."Id", t."ConversationId", t."JoinedAt", t."LastReadAt", t."UserId", t."Id0", t."Active", t."CreatedAt", t."Email", t."FullName", t."LastLoginAt", t."PasswordHash", t."Phone"
      FROM "ChatConversations" AS c
      LEFT JOIN (
          SELECT c0."Id", c0."ConversationId", c0."JoinedAt", c0."LastReadAt", c0."UserId", u."Id" AS "Id0", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
          FROM "ChatParticipants" AS c0
          INNER JOIN "Users" AS u ON c0."UserId" = u."Id"
      ) AS t ON c."Id" = t."ConversationId"
      WHERE c."Id" = ANY (@__convIds_0)
      ORDER BY c."LastMessageAt" DESC, c."Id", t."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "ChatMessages" AS c
      INNER JOIN "Users" AS u ON c."SenderId" = u."Id"
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0
      ORDER BY c."SentAt" DESC
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32), @__participant_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0 AND c."SentAt" > @__participant_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name"
      FROM "ChatConversations" AS c
      WHERE c."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__senderId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."ConversationId", c."JoinedAt", c."LastReadAt", c."UserId"
      FROM "ChatParticipants" AS c
      WHERE c."ConversationId" = @__conversationId_0 AND c."UserId" = @__senderId_1
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32), @p7='?', @p8='?' (DbType = DateTime), @p9='?', @p10='?' (DbType = Int32), @p11='?', @p12='?', @p13='?' (DbType = Int32), @p15='?' (DbType = Int32), @p14='?' (DbType = DateTime), @p16='?', @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = DateTime), @p21='?' (DbType = Int32), @p20='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p7, @p8, @p9, @p10, @p11, @p12, @p13)
      RETURNING "Id";
      UPDATE "ChatConversations" SET "LastMessageAt" = @p14
      WHERE "Id" = @p15;
      INSERT INTO "ChatMessages" ("Content", "ConversationId", "SenderId", "SentAt")
      VALUES (@p16, @p17, @p18, @p19)
      RETURNING "Id";
      UPDATE "ChatParticipants" SET "LastReadAt" = @p20
      WHERE "Id" = @p21;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "Users" AS u
      WHERE u."Id" = @__p_0
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__convIds_0='?' (DbType = Object)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name", t."Id", t."ConversationId", t."JoinedAt", t."LastReadAt", t."UserId", t."Id0", t."Active", t."CreatedAt", t."Email", t."FullName", t."LastLoginAt", t."PasswordHash", t."Phone"
      FROM "ChatConversations" AS c
      LEFT JOIN (
          SELECT c0."Id", c0."ConversationId", c0."JoinedAt", c0."LastReadAt", c0."UserId", u."Id" AS "Id0", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
          FROM "ChatParticipants" AS c0
          INNER JOIN "Users" AS u ON c0."UserId" = u."Id"
      ) AS t ON c."Id" = t."ConversationId"
      WHERE c."Id" = ANY (@__convIds_0)
      ORDER BY c."LastMessageAt" DESC, c."Id", t."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "ChatMessages" AS c
      INNER JOIN "Users" AS u ON c."SenderId" = u."Id"
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0
      ORDER BY c."SentAt" DESC
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32), @__participant_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0 AND c."SentAt" > @__participant_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__convIds_0='?' (DbType = Object)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name", t."Id", t."ConversationId", t."JoinedAt", t."LastReadAt", t."UserId", t."Id0", t."Active", t."CreatedAt", t."Email", t."FullName", t."LastLoginAt", t."PasswordHash", t."Phone"
      FROM "ChatConversations" AS c
      LEFT JOIN (
          SELECT c0."Id", c0."ConversationId", c0."JoinedAt", c0."LastReadAt", c0."UserId", u."Id" AS "Id0", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
          FROM "ChatParticipants" AS c0
          INNER JOIN "Users" AS u ON c0."UserId" = u."Id"
      ) AS t ON c."Id" = t."ConversationId"
      WHERE c."Id" = ANY (@__convIds_0)
      ORDER BY c."LastMessageAt" DESC, c."Id", t."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "ChatMessages" AS c
      INNER JOIN "Users" AS u ON c."SenderId" = u."Id"
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0
      ORDER BY c."SentAt" DESC
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32), @__participant_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0 AND c."SentAt" > @__participant_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__convIds_0='?' (DbType = Object)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name", t."Id", t."ConversationId", t."JoinedAt", t."LastReadAt", t."UserId", t."Id0", t."Active", t."CreatedAt", t."Email", t."FullName", t."LastLoginAt", t."PasswordHash", t."Phone"
      FROM "ChatConversations" AS c
      LEFT JOIN (
          SELECT c0."Id", c0."ConversationId", c0."JoinedAt", c0."LastReadAt", c0."UserId", u."Id" AS "Id0", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
          FROM "ChatParticipants" AS c0
          INNER JOIN "Users" AS u ON c0."UserId" = u."Id"
      ) AS t ON c."Id" = t."ConversationId"
      WHERE c."Id" = ANY (@__convIds_0)
      ORDER BY c."LastMessageAt" DESC, c."Id", t."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "ChatMessages" AS c
      INNER JOIN "Users" AS u ON c."SenderId" = u."Id"
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0
      ORDER BY c."SentAt" DESC
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32), @__participant_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0 AND c."SentAt" > @__participant_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__convIds_0='?' (DbType = Object)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name", t."Id", t."ConversationId", t."JoinedAt", t."LastReadAt", t."UserId", t."Id0", t."Active", t."CreatedAt", t."Email", t."FullName", t."LastLoginAt", t."PasswordHash", t."Phone"
      FROM "ChatConversations" AS c
      LEFT JOIN (
          SELECT c0."Id", c0."ConversationId", c0."JoinedAt", c0."LastReadAt", c0."UserId", u."Id" AS "Id0", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
          FROM "ChatParticipants" AS c0
          INNER JOIN "Users" AS u ON c0."UserId" = u."Id"
      ) AS t ON c."Id" = t."ConversationId"
      WHERE c."Id" = ANY (@__convIds_0)
      ORDER BY c."LastMessageAt" DESC, c."Id", t."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "ChatMessages" AS c
      INNER JOIN "Users" AS u ON c."SenderId" = u."Id"
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0
      ORDER BY c."SentAt" DESC
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32), @__participant_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0 AND c."SentAt" > @__participant_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT u."Id", u."FullName", u."Email"
      FROM "Users" AS u
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT t."Id", t."Content", t."ConversationId", t."SenderId", t."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM (
          SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt"
          FROM "ChatMessages" AS c
          WHERE c."ConversationId" = @__conversationId_0
          ORDER BY c."SentAt" DESC
          LIMIT @__p_1
      ) AS t
      INNER JOIN "Users" AS u ON t."SenderId" = u."Id"
      ORDER BY t."SentAt" DESC
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."ConversationId", c."JoinedAt", c."LastReadAt", c."UserId"
      FROM "ChatParticipants" AS c
      WHERE c."ConversationId" = @__conversationId_0 AND c."UserId" = @__userId_1
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32), @p8='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
      UPDATE "ChatParticipants" SET "LastReadAt" = @p7
      WHERE "Id" = @p8;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."ConversationId", c."JoinedAt", c."LastReadAt", c."UserId"
      FROM "ChatParticipants" AS c
      WHERE c."ConversationId" = @__conversationId_0 AND c."UserId" = @__userId_1
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32), @p8='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
      UPDATE "ChatParticipants" SET "LastReadAt" = @p7
      WHERE "Id" = @p8;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__request_Email_0='?'], CommandType='Text', CommandTimeout='30']
      SELECT t."Id", t."Active", t."CreatedAt", t."Email", t."FullName", t."LastLoginAt", t."PasswordHash", t."Phone", t0."UserId", t0."RoleId", t0."Id", t0."Name"
      FROM (
          SELECT u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
          FROM "Users" AS u
          WHERE u."Email" = @__request_Email_0 AND u."Active"
          LIMIT 1
      ) AS t
      LEFT JOIN (
          SELECT u0."UserId", u0."RoleId", r."Id", r."Name"
          FROM "UserRoles" AS u0
          INNER JOIN "Roles" AS r ON u0."RoleId" = r."Id"
      ) AS t0 ON t."Id" = t0."UserId"
      ORDER BY t."Id", t0."UserId", t0."RoleId"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      UPDATE "Users" SET "LastLoginAt" = @p0
      WHERE "Id" = @p1;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Companies" AS c
      WHERE NOT (c."IsDeleted")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Projects" AS p
      WHERE NOT (p."IsDeleted")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Tasks" AS t
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Users" AS u
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Contacts" AS c
      WHERE NOT (c."IsDeleted")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__now_0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Tasks" AS t
      WHERE t."DueDate" < @__now_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COALESCE(sum(t."Hours"), 0.0)
      FROM "TimeEntries" AS t
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__monthStart_0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      SELECT COALESCE(sum(t."Hours"), 0.0)
      FROM "TimeEntries" AS t
      WHERE t."Date" >= @__monthStart_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT t3."ProjectId", t3."Name" AS "ProjectName", t3."Name0" AS "CompanyName", COALESCE(sum(t3."Hours"), 0.0) AS "TotalHours", t3."EstimatedHours0" AS "EstimatedHours"
      FROM (
          SELECT t."Hours", t0."ProjectId", t1."Name", t2."Name" AS "Name0", COALESCE(t1."EstimatedHours", 0.0) AS "EstimatedHours0"
          FROM "TimeEntries" AS t
          INNER JOIN "Tasks" AS t0 ON t."TaskId" = t0."Id"
          INNER JOIN (
              SELECT p."Id", p."CompanyId", p."EstimatedHours", p."Name"
              FROM "Projects" AS p
              WHERE NOT (p."IsDeleted")
          ) AS t1 ON t0."ProjectId" = t1."Id"
          INNER JOIN (
              SELECT c."Id", c."Name"
              FROM "Companies" AS c
              WHERE NOT (c."IsDeleted")
          ) AS t2 ON t1."CompanyId" = t2."Id"
      ) AS t3
      GROUP BY t3."ProjectId", t3."Name", t3."Name0", t3."EstimatedHours0"
      ORDER BY COALESCE(sum(t3."Hours"), 0.0) DESC
      LIMIT @__p_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__monthStart_0='?' (DbType = DateTime), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT t."UserId", u."FullName" AS "UserName", COALESCE(sum(t."Hours"), 0.0) AS "TotalHours", COALESCE(sum(t."Hours") FILTER (WHERE t."Date" >= @__monthStart_0), 0.0) AS "HoursThisMonth"
      FROM "TimeEntries" AS t
      INNER JOIN "Users" AS u ON t."UserId" = u."Id"
      GROUP BY t."UserId", u."FullName"
      ORDER BY COALESCE(sum(t."Hours"), 0.0) DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT p."Status", count(*)::int
      FROM "Projects" AS p
      WHERE NOT (p."IsDeleted")
      GROUP BY p."Status"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT t."Priority", count(*)::int
      FROM "Tasks" AS t
      GROUP BY t."Priority"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__now_0='?' (DbType = DateTime), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT p."Id", p."Name", p."Status", (
          SELECT count(*)::int
          FROM "Tasks" AS t2
          WHERE p."Id" = t2."ProjectId"), (
          SELECT count(*)::int
          FROM "Tasks" AS t3
          LEFT JOIN "BoardColumns" AS b ON t3."ColumnId" = b."Id"
          WHERE p."Id" = t3."ProjectId" AND b."Id" IS NOT NULL AND (b."SortOrder" = (
              SELECT max(b0."SortOrder")
              FROM "BoardColumns" AS b0
              WHERE b0."ProjectId" = p."Id") OR (b."SortOrder" IS NULL AND (
              SELECT max(b0."SortOrder")
              FROM "BoardColumns" AS b0
              WHERE b0."ProjectId" = p."Id") IS NULL))), (
          SELECT count(*)::int
          FROM "Tasks" AS t4
          WHERE p."Id" = t4."ProjectId" AND t4."DueDate" IS NOT NULL AND t4."DueDate" < @__now_0), COALESCE(p."EstimatedHours", 0.0), (
          SELECT COALESCE(sum(t6."Hours"), 0.0)
          FROM "Tasks" AS t5
          INNER JOIN "TimeEntries" AS t6 ON t5."Id" = t6."TaskId"
          WHERE p."Id" = t5."ProjectId"), CASE
          WHEN COALESCE(p."EstimatedHours", 0.0) > 0.0 THEN round(((
              SELECT COALESCE(sum(t8."Hours"), 0.0)
              FROM "Tasks" AS t7
              INNER JOIN "TimeEntries" AS t8 ON t7."Id" = t8."TaskId"
              WHERE p."Id" = t7."ProjectId") / COALESCE(p."EstimatedHours", 1.0)) * 100.0, 1)
          ELSE 0.0
      END
      FROM "Projects" AS p
      WHERE NOT (p."IsDeleted") AND (
          SELECT count(*)::int
          FROM "Tasks" AS t
          WHERE p."Id" = t."ProjectId") > 0
      ORDER BY CASE
          WHEN COALESCE(p."EstimatedHours", 0.0) > 0.0 THEN round(((
              SELECT COALESCE(sum(t1."Hours"), 0.0)
              FROM "Tasks" AS t0
              INNER JOIN "TimeEntries" AS t1 ON t0."Id" = t1."TaskId"
              WHERE p."Id" = t0."ProjectId") / COALESCE(p."EstimatedHours", 1.0)) * 100.0, 1)
          ELSE 0.0
      END DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT t."Id", t."Type", t."Description", u."FullName" AS "UserName", CASE
          WHEN t0."Id" IS NOT NULL THEN t0."Name"
          WHEN t1."Id" IS NOT NULL THEN t1."FullName"
          WHEN t2."Id" IS NOT NULL THEN t2."Name"
          ELSE NULL
      END AS "EntityName", t."CreatedAt"
      FROM (
          SELECT a."Id", a."CompanyId", a."ContactId", a."CreatedAt", a."Description", a."ProjectId", a."Type", a."UserId"
          FROM "ActivityLogs" AS a
          ORDER BY a."CreatedAt" DESC
          LIMIT @__p_0
      ) AS t
      INNER JOIN "Users" AS u ON t."UserId" = u."Id"
      LEFT JOIN (
          SELECT c."Id", c."Name"
          FROM "Companies" AS c
          WHERE NOT (c."IsDeleted")
      ) AS t0 ON t."CompanyId" = t0."Id"
      LEFT JOIN (
          SELECT c0."Id", c0."FullName"
          FROM "Contacts" AS c0
          WHERE NOT (c0."IsDeleted")
      ) AS t1 ON t."ContactId" = t1."Id"
      LEFT JOIN (
          SELECT p."Id", p."Name"
          FROM "Projects" AS p
          WHERE NOT (p."IsDeleted")
      ) AS t2 ON t."ProjectId" = t2."Id"
      ORDER BY t."CreatedAt" DESC
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Deals" AS d
      WHERE NOT (d."IsDeleted")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COALESCE(sum(COALESCE(d."Value", 0.0)), 0.0)
      FROM "Deals" AS d
      WHERE NOT (d."IsDeleted") AND d."Stage" <> 'ClosedLost'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT d."Stage", count(*)::int, COALESCE(sum(COALESCE(d."Value", 0.0)), 0.0)
      FROM "Deals" AS d
      WHERE NOT (d."IsDeleted")
      GROUP BY d."Stage"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__now_0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Reminders" AS r
      WHERE NOT (r."IsCompleted") AND r."DueDate" < @__now_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__convIds_0='?' (DbType = Object)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name", t."Id", t."ConversationId", t."JoinedAt", t."LastReadAt", t."UserId", t."Id0", t."Active", t."CreatedAt", t."Email", t."FullName", t."LastLoginAt", t."PasswordHash", t."Phone"
      FROM "ChatConversations" AS c
      LEFT JOIN (
          SELECT c0."Id", c0."ConversationId", c0."JoinedAt", c0."LastReadAt", c0."UserId", u."Id" AS "Id0", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
          FROM "ChatParticipants" AS c0
          INNER JOIN "Users" AS u ON c0."UserId" = u."Id"
      ) AS t ON c."Id" = t."ConversationId"
      WHERE c."Id" = ANY (@__convIds_0)
      ORDER BY c."LastMessageAt" DESC, c."Id", t."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Companies" AS c
      WHERE NOT (c."IsDeleted")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Projects" AS p
      WHERE NOT (p."IsDeleted")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "ChatMessages" AS c
      INNER JOIN "Users" AS u ON c."SenderId" = u."Id"
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0
      ORDER BY c."SentAt" DESC
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Tasks" AS t
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32), @__participant_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0 AND c."SentAt" > @__participant_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Users" AS u
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Contacts" AS c
      WHERE NOT (c."IsDeleted")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__now_0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Tasks" AS t
      WHERE t."DueDate" < @__now_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COALESCE(sum(t."Hours"), 0.0)
      FROM "TimeEntries" AS t
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__monthStart_0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      SELECT COALESCE(sum(t."Hours"), 0.0)
      FROM "TimeEntries" AS t
      WHERE t."Date" >= @__monthStart_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT t3."ProjectId", t3."Name" AS "ProjectName", t3."Name0" AS "CompanyName", COALESCE(sum(t3."Hours"), 0.0) AS "TotalHours", t3."EstimatedHours0" AS "EstimatedHours"
      FROM (
          SELECT t."Hours", t0."ProjectId", t1."Name", t2."Name" AS "Name0", COALESCE(t1."EstimatedHours", 0.0) AS "EstimatedHours0"
          FROM "TimeEntries" AS t
          INNER JOIN "Tasks" AS t0 ON t."TaskId" = t0."Id"
          INNER JOIN (
              SELECT p."Id", p."CompanyId", p."EstimatedHours", p."Name"
              FROM "Projects" AS p
              WHERE NOT (p."IsDeleted")
          ) AS t1 ON t0."ProjectId" = t1."Id"
          INNER JOIN (
              SELECT c."Id", c."Name"
              FROM "Companies" AS c
              WHERE NOT (c."IsDeleted")
          ) AS t2 ON t1."CompanyId" = t2."Id"
      ) AS t3
      GROUP BY t3."ProjectId", t3."Name", t3."Name0", t3."EstimatedHours0"
      ORDER BY COALESCE(sum(t3."Hours"), 0.0) DESC
      LIMIT @__p_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__monthStart_0='?' (DbType = DateTime), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT t."UserId", u."FullName" AS "UserName", COALESCE(sum(t."Hours"), 0.0) AS "TotalHours", COALESCE(sum(t."Hours") FILTER (WHERE t."Date" >= @__monthStart_0), 0.0) AS "HoursThisMonth"
      FROM "TimeEntries" AS t
      INNER JOIN "Users" AS u ON t."UserId" = u."Id"
      GROUP BY t."UserId", u."FullName"
      ORDER BY COALESCE(sum(t."Hours"), 0.0) DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT p."Status", count(*)::int
      FROM "Projects" AS p
      WHERE NOT (p."IsDeleted")
      GROUP BY p."Status"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT t."Priority", count(*)::int
      FROM "Tasks" AS t
      GROUP BY t."Priority"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (2ms) [Parameters=[@__now_0='?' (DbType = DateTime), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT p."Id", p."Name", p."Status", (
          SELECT count(*)::int
          FROM "Tasks" AS t2
          WHERE p."Id" = t2."ProjectId"), (
          SELECT count(*)::int
          FROM "Tasks" AS t3
          LEFT JOIN "BoardColumns" AS b ON t3."ColumnId" = b."Id"
          WHERE p."Id" = t3."ProjectId" AND b."Id" IS NOT NULL AND (b."SortOrder" = (
              SELECT max(b0."SortOrder")
              FROM "BoardColumns" AS b0
              WHERE b0."ProjectId" = p."Id") OR (b."SortOrder" IS NULL AND (
              SELECT max(b0."SortOrder")
              FROM "BoardColumns" AS b0
              WHERE b0."ProjectId" = p."Id") IS NULL))), (
          SELECT count(*)::int
          FROM "Tasks" AS t4
          WHERE p."Id" = t4."ProjectId" AND t4."DueDate" IS NOT NULL AND t4."DueDate" < @__now_0), COALESCE(p."EstimatedHours", 0.0), (
          SELECT COALESCE(sum(t6."Hours"), 0.0)
          FROM "Tasks" AS t5
          INNER JOIN "TimeEntries" AS t6 ON t5."Id" = t6."TaskId"
          WHERE p."Id" = t5."ProjectId"), CASE
          WHEN COALESCE(p."EstimatedHours", 0.0) > 0.0 THEN round(((
              SELECT COALESCE(sum(t8."Hours"), 0.0)
              FROM "Tasks" AS t7
              INNER JOIN "TimeEntries" AS t8 ON t7."Id" = t8."TaskId"
              WHERE p."Id" = t7."ProjectId") / COALESCE(p."EstimatedHours", 1.0)) * 100.0, 1)
          ELSE 0.0
      END
      FROM "Projects" AS p
      WHERE NOT (p."IsDeleted") AND (
          SELECT count(*)::int
          FROM "Tasks" AS t
          WHERE p."Id" = t."ProjectId") > 0
      ORDER BY CASE
          WHEN COALESCE(p."EstimatedHours", 0.0) > 0.0 THEN round(((
              SELECT COALESCE(sum(t1."Hours"), 0.0)
              FROM "Tasks" AS t0
              INNER JOIN "TimeEntries" AS t1 ON t0."Id" = t1."TaskId"
              WHERE p."Id" = t0."ProjectId") / COALESCE(p."EstimatedHours", 1.0)) * 100.0, 1)
          ELSE 0.0
      END DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT t."Id", t."Type", t."Description", u."FullName" AS "UserName", CASE
          WHEN t0."Id" IS NOT NULL THEN t0."Name"
          WHEN t1."Id" IS NOT NULL THEN t1."FullName"
          WHEN t2."Id" IS NOT NULL THEN t2."Name"
          ELSE NULL
      END AS "EntityName", t."CreatedAt"
      FROM (
          SELECT a."Id", a."CompanyId", a."ContactId", a."CreatedAt", a."Description", a."ProjectId", a."Type", a."UserId"
          FROM "ActivityLogs" AS a
          ORDER BY a."CreatedAt" DESC
          LIMIT @__p_0
      ) AS t
      INNER JOIN "Users" AS u ON t."UserId" = u."Id"
      LEFT JOIN (
          SELECT c."Id", c."Name"
          FROM "Companies" AS c
          WHERE NOT (c."IsDeleted")
      ) AS t0 ON t."CompanyId" = t0."Id"
      LEFT JOIN (
          SELECT c0."Id", c0."FullName"
          FROM "Contacts" AS c0
          WHERE NOT (c0."IsDeleted")
      ) AS t1 ON t."ContactId" = t1."Id"
      LEFT JOIN (
          SELECT p."Id", p."Name"
          FROM "Projects" AS p
          WHERE NOT (p."IsDeleted")
      ) AS t2 ON t."ProjectId" = t2."Id"
      ORDER BY t."CreatedAt" DESC
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Deals" AS d
      WHERE NOT (d."IsDeleted")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT COALESCE(sum(COALESCE(d."Value", 0.0)), 0.0)
      FROM "Deals" AS d
      WHERE NOT (d."IsDeleted") AND d."Stage" <> 'ClosedLost'
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT d."Stage", count(*)::int, COALESCE(sum(COALESCE(d."Value", 0.0)), 0.0)
      FROM "Deals" AS d
      WHERE NOT (d."IsDeleted")
      GROUP BY d."Stage"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__now_0='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Reminders" AS r
      WHERE NOT (r."IsCompleted") AND r."DueDate" < @__now_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__convIds_0='?' (DbType = Object)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."CreatedAt", c."CreatedById", c."IsGroup", c."LastMessageAt", c."Name", t."Id", t."ConversationId", t."JoinedAt", t."LastReadAt", t."UserId", t."Id0", t."Active", t."CreatedAt", t."Email", t."FullName", t."LastLoginAt", t."PasswordHash", t."Phone"
      FROM "ChatConversations" AS c
      LEFT JOIN (
          SELECT c0."Id", c0."ConversationId", c0."JoinedAt", c0."LastReadAt", c0."UserId", u."Id" AS "Id0", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
          FROM "ChatParticipants" AS c0
          INNER JOIN "Users" AS u ON c0."UserId" = u."Id"
      ) AS t ON c."Id" = t."ConversationId"
      WHERE c."Id" = ANY (@__convIds_0)
      ORDER BY c."LastMessageAt" DESC, c."Id", t."Id"
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM "ChatMessages" AS c
      INNER JOIN "Users" AS u ON c."SenderId" = u."Id"
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0
      ORDER BY c."SentAt" DESC
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__8__locals2_conv_Id_0='?' (DbType = Int32), @__participant_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__8__locals2_conv_Id_0 AND c."SentAt" > @__participant_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT u."Id", u."FullName", u."Email"
      FROM "Users" AS u
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT t."Id", t."Content", t."ConversationId", t."SenderId", t."SentAt", u."Id", u."Active", u."CreatedAt", u."Email", u."FullName", u."LastLoginAt", u."PasswordHash", u."Phone"
      FROM (
          SELECT c."Id", c."Content", c."ConversationId", c."SenderId", c."SentAt"
          FROM "ChatMessages" AS c
          WHERE c."ConversationId" = @__conversationId_0
          ORDER BY c."SentAt" DESC
          LIMIT @__p_1
      ) AS t
      INNER JOIN "Users" AS u ON t."SenderId" = u."Id"
      ORDER BY t."SentAt" DESC
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."ConversationId", c."JoinedAt", c."LastReadAt", c."UserId"
      FROM "ChatParticipants" AS c
      WHERE c."ConversationId" = @__conversationId_0 AND c."UserId" = @__userId_1
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32), @p8='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
      UPDATE "ChatParticipants" SET "LastReadAt" = @p7
      WHERE "Id" = @p8;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__conversationId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."Id", c."ConversationId", c."JoinedAt", c."LastReadAt", c."UserId"
      FROM "ChatParticipants" AS c
      WHERE c."ConversationId" = @__conversationId_0 AND c."UserId" = @__userId_1
      LIMIT 1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Int32), @p8='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
      INSERT INTO "AuditLogs" ("Action", "CreatedAt", "Details", "EntityId", "EntityName", "EntityType", "UserId")
      VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
      RETURNING "Id";
      UPDATE "ChatParticipants" SET "LastReadAt" = @p7
      WHERE "Id" = @p8;
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT n."Id", n."CreatedAt", n."IsRead", n."Message", n."RelatedEntityId", n."RelatedEntityType", n."Title", n."Type", n."UserId"
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0
      ORDER BY n."CreatedAt" DESC
      LIMIT @__p_1
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "Notifications" AS n
      WHERE n."UserId" = @__userId_0 AND NOT (n."IsRead")
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT c."ConversationId", c."LastReadAt"
      FROM "ChatParticipants" AS c
      WHERE c."UserId" = @__userId_0
info: Microsoft.EntityFrameworkCore.Database.Command[20101]
      Executed DbCommand (0ms) [Parameters=[@__p_ConversationId_0='?' (DbType = Int32), @__p_LastReadAt_1='?' (DbType = DateTime), @__8__locals1_userId_2='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
      SELECT count(*)::int
      FROM "ChatMessages" AS c
      WHERE c."ConversationId" = @__p_ConversationId_0 AND c."SentAt" > @__p_LastReadAt_1 AND c."SenderId" <> @__8__locals1_userId_2
